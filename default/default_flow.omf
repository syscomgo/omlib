[{"flow_list":[{"config":{"name":"事故管理","display_field":0,"status_field":0,"mission":true,"search_field":0,"worklog":true,"title_field":0,"fp_show":true,"relation":true,"flowlog":true,"permission":[],"attachment":true,"api":true,"history":true,"subflow":[],"description":""},"flow_app_id__app_name":"服務管理","flow_name":"事故管理","description":"","flowobject":{"is_sub":false,"flow_line_counter":64,"flow_item_counter":35,"items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":420,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":1238.83,"left":419.969,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_6","text":"開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"#(FORMITM_28)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_4)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_4)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":100,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":780},"top":0,"type":"outflow","left":0},{"id":"FITEM_7","text":"指派人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"input2":[],"cform_object":null,"action2_text":"","top":200,"flow_object":null,"input":[{"value":"$(submit_org)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"$(submitter)","name":"#(FORMITM_9)","require":false,"des":""}],"calculate":[{"from":null,"to":"$(submit_org_id)","para2":null,"type":"form_creater_group","para1":null},{"from":null,"to":"$(submitter__)","para2":null,"type":"form_creater","para1":null},{"from":"$(submitter__)","to":"$(submitter)","para2":null,"type":"get_user_name","para1":null},{"from":"$(submit_org_id)","to":"$(submit_org)","para2":null,"type":"get_group_name","para1":null}],"left":420,"subflow_id":"","action1_text":"","form_object":{"op1":[],"form_box_counter":13,"items":[{"parent":"public","id":"FORMBOX_4","config":{"color":"box box-danger","title":"事故資訊區塊","idcounter":4},"hidden":false,"type":"box12"},{"parent":"FORMBOX_4","id":"FORMBOX_5","config":{"color":"box","title":"","idcounter":5},"hidden":false,"type":"box6"},{"parent":"FORMBOX_4","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"title":"事故來源","lists":[{"value":"event_esc","text":"事件升級"},{"value":"out_api","text":"外部介接"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":true,"title":"解決內容","require":false,"regex":"","rows":"9"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_6","id":"FORMITM_18","config":{"value":"","idcounter":18,"readonly":false,"title":"事故分類","lists":[{"value":"hardware","text":"硬體"},{"value":"software","text":"軟體"},{"value":"other","text":"其他"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_3","config":{"value":"1","idcounter":3,"readonly":false,"title":"狀態","lists":[{"value":"1","text":"指派"},{"value":"2","text":"解決"},{"value":"3","text":"取消"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"受派組織","lists":[],"require":true,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_6","id":"FORMITM_23","config":{"value":"","idcounter":23,"readonly":false,"title":"事故所有組","lists":[],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":false,"placeholder":"","title":"事故提出者","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_28","config":{"value":"","idcounter":28,"readonly":false,"placeholder":"","title":"事故主旨","require":true,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"idcounter":2,"readonly":false,"title":"事故內容","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_14","config":{"value":"1","idcounter":14,"readonly":false,"title":"影響性(Impact)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_15","config":{"value":"1","idcounter":15,"readonly":false,"title":"緊急性(Urgency)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_16","config":{"value":"1","idcounter":16,"readonly":false,"title":"優先等級(Priority)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"}],"status":[],"group":[],"title":false,"form_item_counter":28,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_9","text":"指派Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"#(FORMITM_28)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_4)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_4)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":550,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":240},"top":0,"type":"outflow","left":0},{"id":"FITEM_10","text":"解決人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":420,"input2":[],"action2_text":"","top":670,"input":[],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":13,"items":[{"parent":"public","id":"FORMBOX_4","config":{"color":"box box-danger","title":"事故資訊區塊","idcounter":4},"hidden":false,"type":"box12"},{"parent":"FORMBOX_4","id":"FORMBOX_6","config":{"color":"box box-primary","title":"指派修改","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"組織","lists":[],"require":false,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_4","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_8","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"title":"狀態","lists":[{"value":"1","text":"指派"},{"value":"2","text":"解決"}],"require":false},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"解決內容","require":false,"regex":"","rows":"9"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":28,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_12","text":"解決Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":"$(user_name)","name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"#(FORMITM_28)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":null,"name":"#G1(FORMITM_12)","require":false,"des":""},{"value":null,"name":"#G2(FORMITM_12)","require":false,"des":""}],"top":1125.55,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":419.969},"top":0,"type":"outflow","left":0},{"id":"FITEM_14","text":"並行(開單,mail)","config":{"top":100,"log":true,"rules":[{"value2":"","rule":"=","target":"FITEM_26","value1":""},{"value2":"","rule":"=","target":"FITEM_7","value1":""}],"left":420},"top":0,"type":"async","left":0},{"id":"FLINE_MW17","config":{"linebox_top_width":20,"linebox_top":100,"source_item":"FITEM_1","source_side":"bottom","idcounter":17,"linebox_bottom_width":-20,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":110,"target_item":"FITEM_14","target_side":"top","linebox_left":480},"type":"line"},{"id":"FITEM_15","text":"並行(指派)","config":{"top":550,"log":true,"rules":[{"value2":"","rule":"=","target":"FITEM_9","value1":""},{"value2":"","rule":"=","target":"FITEM_10","value1":""}],"left":420},"top":0,"type":"async","left":0},{"id":"FLINE_MH21","config":{"linebox_top_width":-30,"linebox_top":600,"source_item":"FITEM_15","source_side":"left","idcounter":21,"linebox_bottom_width":30,"linebox_arrow_left":360,"linebox_long":0,"linebox_arrow_top":596,"target_item":"FITEM_9","target_side":"right","linebox_left":390},"type":"line"},{"id":"FLINE_MW22","config":{"linebox_top_width":30,"linebox_top":660,"source_item":"FITEM_15","source_side":"bottom","idcounter":22,"linebox_bottom_width":-30,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":680,"target_item":"FITEM_10","target_side":"top","linebox_left":480},"type":"line"},{"id":"FITEM_24","text":"組合解決Mail資訊","config":{"error_pass":false,"top":900,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(user_name)","name":"$(user_name)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""}],"input":[{"value":"#(FORMITM_28)","name":"incident_summary","require":false,"des":""},{"value":"#(FORMITM_2)","name":"incident_note","require":false,"des":""},{"value":"$(assignee_group)","name":"assignee_group","require":false,"des":""},{"value":"$(assignee)","name":"assignee","require":false,"des":""},{"value":"#(FORMITM_3)","name":"incident_status","require":false,"des":""},{"value":"#(FORMITM_5)","name":"resolution_text","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":"$(UUU)","name":"TTT","require":false,"des":""},{"value":null,"name":"user_name","require":false,"des":""},{"value":null,"name":"nowtime","require":false,"des":""}],"calculate":[{"from":null,"to":"$(UUU)","para2":null,"type":"form_creater","para1":null},{"from":"#G1(FORMITM_4)","to":"$(assignee_group)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_4)","to":"$(assignee)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"a = \"事故主旨：\"\nb = \"事故內容：\"\nc = \"組織：\"\nd = \"受派人：\"\ne = \"狀態：\"\nf = \"解決內容：\"\ng = \"解決時間：\"\nfrom omuser.models import OmUser,OmGroup\nfrom datetime import datetime as dt\ndef find_user_mail(user_id=None):\n    user_email = OmUser.objects.get(id=user_id)\n    email = user_email.email\n    return email\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"1\":\n        final_status = \"指派\"\n    elif status_id == \"2\":\n        final_status = \"解決\"\n    return final_status\nEEE = status_format(incident_status)\nuser_name = find_user_mail(TTT)\nnowtime = dt.strftime(dt.now(),'%Y-%m-%d %H:%M:%S')\nAA = a + incident_summary + \"\\n\" \nBB = b + incident_note + \"\\n\"\nCC = c + assignee_group + \"\\n\"\nDD = d + assignee + \"\\n\"\nEE = e + EEE + \"\\n\"\nFF = f + resolution_text + \"\\n\"\nGG = g + nowtime + \"\\n\"\nfinal = AA + BB + CC + DD + EE + FF + GG","load_balance":false,"left":419.958},"top":0,"type":"python","left":0},{"id":"FITEM_26","text":"開單組合Mail資訊","config":{"error_pass":false,"top":100,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""}],"input":[{"value":"#(FORMITM_28)","name":"incident_summary","require":false,"des":""},{"value":"#(FORMITM_2)","name":"incident_note","require":false,"des":""},{"value":"#(FORMITM_3)","name":"incident_status","require":false,"des":""},{"value":"$(group_name)","name":"group_name","require":false,"des":""},{"value":"$(assignee_name)","name":"assignee_name","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""}],"calculate":[{"from":"#G1(FORMITM_4)","to":"$(group_name)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_4)","to":"$(assignee_name)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"a = \"事故主旨：\"\nb = \"事故內容：\"\nc = \"組織：\"\nd = \"受派人：\"\ne = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"1\":\n        final_status = \"指派\"\n    elif status_id == \"2\":\n        final_status = \"解決\"\n    return final_status\nEEE = status_format(incident_status)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\n\nAA = a + incident_summary + \"\\n\" \nBB = b + incident_note + \"\\n\"\nCC = c + group_name + \"\\n\"\nDD = d + assignee_name + \"\\n\"\nEE = e + EEE + \"\\n\"\nfinal = AA + BB + CC + DD + EE","load_balance":false,"left":600},"top":0,"type":"python","left":0},{"id":"FLINE_MH39","config":{"linebox_top_width":30,"linebox_top":150,"source_item":"FITEM_14","source_side":"right","idcounter":39,"linebox_bottom_width":-30,"linebox_arrow_left":590,"linebox_long":0,"linebox_arrow_top":146,"target_item":"FITEM_26","target_side":"left","linebox_left":570},"type":"line"},{"id":"FLINE_MH40","config":{"linebox_top_width":30,"linebox_top":150,"source_item":"FITEM_26","source_side":"right","idcounter":40,"linebox_bottom_width":-30,"linebox_arrow_left":770,"linebox_long":0,"linebox_arrow_top":146,"target_item":"FITEM_6","target_side":"left","linebox_left":750},"type":"line"},{"id":"FITEM_27","text":"解決日期","config":{"top":1017.19,"output":[{"value":"#(FORMITM_7)","name":"$(CCC)","des":""}],"input":[{"value":"$(nowtime)","name":"#(FORMITM_7)","require":false,"des":""}],"calculate":[],"log":true,"left":419.961},"top":0,"type":"setform","left":0},{"id":"FLINE_MW43","config":{"linebox_top_width":-28.595000000000027,"linebox_top":1008.595,"source_item":"FITEM_24","source_side":"bottom","idcounter":43,"linebox_bottom_width":28.595000000000027,"linebox_arrow_left":475.961,"linebox_long":0.002999999999985903,"linebox_arrow_top":1027.19,"target_item":"FITEM_27","target_side":"top","linebox_left":479.958},"type":"line"},{"id":"FLINE_MW50","config":{"linebox_top_width":-24.179999999999836,"linebox_top":1121.37,"source_item":"FITEM_27","source_side":"bottom","idcounter":50,"linebox_bottom_width":24.180000000000064,"linebox_arrow_left":475.969,"linebox_long":0.007999999999981355,"linebox_arrow_top":1135.55,"target_item":"FITEM_12","target_side":"top","linebox_left":479.961},"type":"line"},{"id":"FLINE_MW51","config":{"linebox_top_width":26.639999999999873,"linebox_top":1232.19,"source_item":"FITEM_12","source_side":"bottom","idcounter":51,"linebox_bottom_width":-26.6400000000001,"linebox_arrow_left":475.969,"linebox_long":0,"linebox_arrow_top":1248.83,"target_item":"FITEM_4","target_side":"top","linebox_left":479.969},"type":"line"},{"id":"FITEM_31","text":"判斷","config":{"calculate":[],"top":780,"log":true,"rules":[{"value2":"2","rule":"=","target":"FITEM_24","value1":"#(FORMITM_3)"},{"value2":"1","rule":"=","target":"FITEM_7","value1":"#(FORMITM_3)"}],"left":420},"top":0,"type":"switch","left":0},{"id":"FLINE_MW52","config":{"linebox_top_width":25,"linebox_top":775,"source_item":"FITEM_10","source_side":"bottom","idcounter":52,"linebox_bottom_width":-25,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":790,"target_item":"FITEM_31","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MW53","config":{"linebox_top_width":30,"linebox_top":890,"source_item":"FITEM_31","source_side":"bottom","idcounter":53,"linebox_bottom_width":-30,"linebox_arrow_left":475.958,"linebox_long":0.04199999999997317,"linebox_arrow_top":910,"target_item":"FITEM_24","target_side":"top","linebox_left":479.958},"type":"line"},{"id":"FLINE_MH54","config":{"linebox_top_width":100,"linebox_top":250,"source_item":"FITEM_31","source_side":"right","idcounter":54,"linebox_bottom_width":100,"linebox_arrow_left":540,"linebox_long":580,"linebox_arrow_top":246,"target_item":"FITEM_7","target_side":"right","linebox_left":640},"type":"line"},{"id":"FITEM_32","text":"狀態判斷","config":{"calculate":[],"top":300,"log":true,"rules":[{"value2":"2","rule":"=","target":"FITEM_33","value1":"#(FORMITM_3)"},{"value2":"3","rule":"=","target":"FITEM_34","value1":"#(FORMITM_3)"},{"value2":"1","rule":"=","target":"FITEM_35","value1":"#(FORMITM_3)"}],"left":420},"top":0,"type":"switch","left":0},{"id":"FLINE_MW55","config":{"linebox_top_width":20,"linebox_top":300,"source_item":"FITEM_7","source_side":"bottom","idcounter":55,"linebox_bottom_width":-20,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":310,"target_item":"FITEM_32","target_side":"top","linebox_left":480},"type":"line"},{"id":"FITEM_33","text":"馬上解決","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"input2":[],"cform_object":null,"action2_text":"","top":300,"flow_object":null,"input":[],"calculate":[],"left":240,"subflow_id":"","action1_text":"","form_object":{"op1":[],"form_box_counter":13,"items":[{"parent":"public","id":"FORMBOX_4","config":{"color":"box box-danger","title":"事故資訊區塊","idcounter":4},"hidden":false,"type":"box12"},{"parent":"FORMBOX_4","id":"FORMBOX_5","config":{"color":"box","title":"","idcounter":5},"hidden":false,"type":"box6"},{"parent":"FORMBOX_4","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"title":"事故來源","lists":[{"value":"event_esc","text":"事件升級"},{"value":"out_api","text":"外部介接"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_18","config":{"value":"","idcounter":18,"readonly":false,"title":"事故分類","lists":[{"value":"hardware","text":"硬體"},{"value":"software","text":"軟體"},{"value":"other","text":"其他"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"受派組織","lists":[],"require":true,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_6","id":"FORMITM_23","config":{"value":"","idcounter":23,"readonly":false,"title":"事故所有組","lists":[],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":false,"placeholder":"","title":"事故提出者","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_28","config":{"value":"","idcounter":28,"readonly":false,"placeholder":"","title":"事故主旨","require":true,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"idcounter":2,"readonly":false,"title":"事故內容","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_14","config":{"value":"1","idcounter":14,"readonly":false,"title":"影響性(Impact)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_15","config":{"value":"1","idcounter":15,"readonly":false,"title":"緊急性(Urgency)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_16","config":{"value":"1","idcounter":16,"readonly":false,"title":"優先等級(Priority)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_8","id":"FORMITM_3","config":{"value":"0","idcounter":3,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"解決"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"解決內容","require":true,"regex":"","rows":"9"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":28,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH57","config":{"linebox_top_width":-30,"linebox_top":350,"source_item":"FITEM_32","source_side":"left","idcounter":57,"linebox_bottom_width":30,"linebox_arrow_left":360,"linebox_long":0,"linebox_arrow_top":346,"target_item":"FITEM_33","target_side":"right","linebox_left":390},"type":"line"},{"id":"FLINE_MH58","config":{"linebox_top_width":100,"linebox_top":350,"source_item":"FITEM_33","source_side":"left","idcounter":58,"linebox_bottom_width":279.958,"linebox_arrow_left":409.958,"linebox_long":600,"linebox_arrow_top":946,"target_item":"FITEM_24","target_side":"left","linebox_left":140},"type":"line"},{"id":"FITEM_34","text":"取消原因填寫","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"input2":[],"cform_object":null,"action2_text":"","top":300,"flow_object":null,"input":[],"calculate":[],"left":690,"subflow_id":"","action1_text":"","form_object":{"op1":[],"form_box_counter":13,"items":[{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_12","config":{"color":"box box-danger","title":"取消事故單區塊","idcounter":12},"hidden":false,"type":"box6"},{"parent":"FORMBOX_12","id":"FORMITM_20","config":{"idcounter":20,"readonly":false,"title":"取消說明","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":true,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":28,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH59","config":{"linebox_top_width":75,"linebox_top":350,"source_item":"FITEM_32","source_side":"right","idcounter":59,"linebox_bottom_width":-75,"linebox_arrow_left":680,"linebox_long":0,"linebox_arrow_top":346,"target_item":"FITEM_34","target_side":"left","linebox_left":615},"type":"line"},{"id":"FLINE_MH60","config":{"linebox_top_width":-210.03099999999995,"linebox_top":1288.83,"source_item":"FITEM_34","source_side":"bottom","idcounter":60,"linebox_bottom_width":-908.8299999999999,"linebox_arrow_left":539.969,"linebox_long":0,"linebox_arrow_top":1284.83,"target_item":"FITEM_4","target_side":"right","linebox_left":750},"type":"line"},{"id":"FITEM_35","text":"開單組合Mail資訊","config":{"error_pass":false,"top":430,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""}],"input":[{"value":"#(FORMITM_28)","name":"incident_summary","require":false,"des":""},{"value":"#(FORMITM_2)","name":"incident_note","require":false,"des":""},{"value":"#(FORMITM_3)","name":"incident_status","require":false,"des":""},{"value":"$(group_name)","name":"group_name","require":false,"des":""},{"value":"$(assignee_name)","name":"assignee_name","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""}],"calculate":[{"from":"#G1(FORMITM_4)","to":"$(group_name)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_4)","to":"$(assignee_name)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"a = \"事故主旨：\"\nb = \"事故內容：\"\nc = \"組織：\"\nd = \"受派人：\"\ne = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"1\":\n        final_status = \"指派\"\n    elif status_id == \"2\":\n        final_status = \"解決\"\n    return final_status\nEEE = status_format(incident_status)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\n\nAA = a + incident_summary + \"\\n\" \nBB = b + incident_note + \"\\n\"\nCC = c + group_name + \"\\n\"\nDD = d + assignee_name + \"\\n\"\nEE = e + EEE + \"\\n\"\nfinal = AA + BB + CC + DD + EE","load_balance":false,"left":420},"top":0,"type":"python","left":0},{"id":"FLINE_MW61","config":{"linebox_top_width":35,"linebox_top":415,"source_item":"FITEM_32","source_side":"bottom","idcounter":61,"linebox_bottom_width":-35,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":440,"target_item":"FITEM_35","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MW62","config":{"linebox_top_width":30,"linebox_top":540,"source_item":"FITEM_35","source_side":"bottom","idcounter":62,"linebox_bottom_width":-30,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":560,"target_item":"FITEM_15","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MW64","config":{"linebox_top_width":20,"linebox_top":200,"source_item":"FITEM_14","source_side":"bottom","idcounter":64,"linebox_bottom_width":-20,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":210,"target_item":"FITEM_7","target_side":"top","linebox_left":480},"type":"line"}],"version":16777216,"subflow":[],"uid":1589768387021,"form_object":{"op1":[],"form_box_counter":13,"items":[{"parent":"public","id":"FORMBOX_4","config":{"color":"box box-danger","title":"事故資訊區塊","idcounter":4},"hidden":false,"type":"box12"},{"parent":"FORMBOX_4","id":"FORMBOX_5","config":{"color":"box","title":"","idcounter":5},"hidden":false,"type":"box6"},{"parent":"FORMBOX_4","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"title":"事故來源","lists":[{"value":"event_esc","text":"事件升級"},{"value":"out_api","text":"外部介接"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":true,"title":"解決內容","require":false,"regex":"","rows":"9"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_6","id":"FORMITM_18","config":{"value":"","idcounter":18,"readonly":false,"title":"事故分類","lists":[{"value":"hardware","text":"硬體"},{"value":"software","text":"軟體"},{"value":"other","text":"其他"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_3","config":{"value":"0","idcounter":3,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"指派"},{"value":"2","text":"解決"},{"value":"3","text":"取消"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"受派組織","lists":[],"require":true,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"public","id":"FORMBOX_10","config":{"color":"box","title":"","idcounter":10},"hidden":false,"type":"box12"},{"parent":"FORMBOX_10","id":"FORMBOX_12","config":{"color":"box box-danger","title":"取消事故單區塊","idcounter":12},"hidden":false,"type":"box6"},{"parent":"FORMBOX_12","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"取消說明","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_6","id":"FORMITM_23","config":{"value":"","idcounter":23,"readonly":false,"title":"事故所有組","lists":[],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_10","id":"FORMBOX_13","config":{"color":"box box-primary","title":"隱藏欄位","idcounter":13},"hidden":true,"type":"box6"},{"parent":"FORMBOX_13","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"監控流程<原則名稱><主機名稱>","title":"監控原則","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_13","id":"FORMITM_27","config":{"value":"","idcounter":27,"readonly":false,"placeholder":"","title":"CI","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":false,"placeholder":"","title":"事故提出者","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_28","config":{"value":"","idcounter":28,"readonly":false,"placeholder":"","title":"事故主旨","require":true,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"idcounter":2,"readonly":false,"title":"事故內容","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_14","config":{"value":"1","idcounter":14,"readonly":false,"title":"影響性(Impact)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_15","config":{"value":"1","idcounter":15,"readonly":false,"title":"緊急性(Urgency)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_16","config":{"value":"1","idcounter":16,"readonly":false,"title":"優先等級(Priority)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"}],"status":[],"group":[],"title":false,"form_item_counter":28,"op2":[],"user":[],"level":[]}}},{"config":{"name":"問題管理","display_field":0,"status_field":0,"mission":true,"search_field":0,"worklog":true,"title_field":0,"fp_show":true,"relation":true,"flowlog":true,"permission":[],"attachment":true,"api":true,"history":true,"subflow":[],"description":""},"flow_app_id__app_name":"服務管理","flow_name":"問題管理","description":"","flowobject":{"is_sub":false,"flow_line_counter":89,"flow_item_counter":39,"items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":420,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":1578.83,"left":419.969,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_6","text":"開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"#(FORMITM_29)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_4)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_4)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":100,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":780},"top":0,"type":"outflow","left":0},{"id":"FITEM_7","text":"指派人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":420,"input2":[],"action2_text":"","top":200,"flow_object":null,"input":[{"value":"1","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(org)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"$(submitter)","name":"#(FORMITM_9)","require":false,"des":""}],"calculate":[{"from":null,"to":"$(submit_org)","para2":null,"type":"form_creater_group","para1":null},{"from":null,"to":"$(submitter__)","para2":null,"type":"form_creater","para1":null},{"from":"$(submitter__)","to":"$(submitter)","para2":null,"type":"get_user_name","para1":null},{"from":"$(submit_org)","to":"$(org)","para2":null,"type":"get_group_name","para1":null}],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":12,"items":[{"parent":"public","id":"FORMBOX_4","config":{"color":"box box-danger","title":"問題單資訊區塊","idcounter":4},"hidden":false,"type":"box12"},{"parent":"FORMBOX_4","id":"FORMBOX_5","config":{"color":"box","title":"","idcounter":5},"hidden":false,"type":"box6"},{"parent":"FORMBOX_4","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"title":"問題種類","lists":[{"value":"high_incident","text":"常發生的事故單"},{"value":"not_routine","text":"非預期問題"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_18","config":{"value":"","idcounter":18,"readonly":false,"title":"問題分類","lists":[{"value":"hardware","text":"硬體"},{"value":"software","text":"軟體"},{"value":"other","text":"其他"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_3","config":{"value":"0","idcounter":3,"readonly":false,"title":"狀態","lists":[{"value":"1","text":"指派"},{"value":"4","text":"完成"},{"value":"5","text":"取消"}],"require":false},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"組織","lists":[],"require":true,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_5","id":"FORMITM_28","config":{"value":"","idcounter":28,"readonly":false,"placeholder":"","title":"問題協調組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":false,"placeholder":"","title":"問題協調員","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_29","config":{"value":"","idcounter":29,"readonly":false,"placeholder":"","title":"問題主旨","require":true,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"idcounter":2,"readonly":false,"title":"問題內容","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":false,"title":"影響性(Impact)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":false,"title":"緊急性(Urgency)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"title":"優先等級(Priority)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_4","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":29,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_9","text":"指派Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"#(FORMITM_29)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_4)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_4)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":550,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":240},"top":0,"type":"outflow","left":0},{"id":"FITEM_10","text":"解決問題","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":420,"input2":[],"action2_text":"","top":895,"input":[{"value":"4","name":"#(FORMITM_3)","require":false,"des":""}],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":21,"items":[{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_19","config":{"color":"box box-danger","title":"問題單資訊區塊","idcounter":19},"hidden":false,"type":"box12"},{"parent":"FORMBOX_19","id":"FORMBOX_5","config":{"color":"box","title":"","idcounter":5},"hidden":false,"type":"box6"},{"parent":"FORMBOX_5","id":"FORMITM_28","config":{"value":"","idcounter":28,"readonly":false,"placeholder":"","title":"問題協調組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":false,"placeholder":"","title":"問題協調員","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_29","config":{"value":"","idcounter":29,"readonly":false,"placeholder":"","title":"問題主旨","require":true,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"idcounter":2,"readonly":false,"title":"問題內容","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":false,"title":"影響性(Impact)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":false,"title":"緊急性(Urgency)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"title":"優先等級(Priority)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_19","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"title":"問題種類","lists":[{"value":"high_incident","text":"常發生的事故單"},{"value":"not_routine","text":"非預期問題"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_18","config":{"value":"","idcounter":18,"readonly":false,"title":"問題分類","lists":[{"value":"hardware","text":"硬體"},{"value":"software","text":"軟體"},{"value":"other","text":"其他"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"組織","lists":[],"require":true,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_8","id":"FORMITM_3","config":{"value":"4","idcounter":3,"readonly":false,"title":"狀態","lists":[{"value":"4","text":"完成"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_8","id":"FORMITM_27","config":{"idcounter":27,"readonly":false,"title":"調查過程","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"解決內容","require":true,"regex":"","rows":"9"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_26","config":{"idcounter":26,"readonly":true,"title":"替代方案","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":29,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_12","text":"解決Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":"$(zzz)","name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"#(FORMITM_29)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":null,"name":"#G1(FORMITM_12)","require":false,"des":""},{"value":null,"name":"#G2(FORMITM_12)","require":false,"des":""}],"top":1450.55,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":419.961},"top":0,"type":"outflow","left":0},{"id":"FITEM_14","text":"並行(開單,mail)","config":{"top":100,"log":true,"rules":[{"value2":"","rule":"=","target":"FITEM_26","value1":""},{"value2":"","rule":"=","target":"FITEM_7","value1":""}],"left":420},"top":0,"type":"async","left":0},{"id":"FLINE_MW17","config":{"linebox_top_width":20,"linebox_top":100,"source_item":"FITEM_1","source_side":"bottom","idcounter":17,"linebox_bottom_width":-20,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":110,"target_item":"FITEM_14","target_side":"top","linebox_left":480},"type":"line"},{"id":"FITEM_15","text":"並行(指派)","config":{"top":550,"log":true,"rules":[{"value2":"","rule":"=","target":"FITEM_9","value1":""},{"value2":"","rule":"=","target":"FITEM_35","value1":""}],"left":420},"top":0,"type":"async","left":0},{"id":"FLINE_MH21","config":{"linebox_top_width":-30,"linebox_top":600,"source_item":"FITEM_15","source_side":"left","idcounter":21,"linebox_bottom_width":30,"linebox_arrow_left":360,"linebox_long":0,"linebox_arrow_top":596,"target_item":"FITEM_9","target_side":"right","linebox_left":390},"type":"line"},{"id":"FITEM_24","text":"組合解決Mail資訊","config":{"error_pass":false,"top":1175,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(user_name)","name":"$(user_name)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""}],"input":[{"value":"#(FORMITM_29)","name":"problem_summary","require":false,"des":""},{"value":"#(FORMITM_2)","name":"problem_note","require":false,"des":""},{"value":"$(assignee_group)","name":"assignee_group","require":false,"des":""},{"value":"$(assignee)","name":"assignee","require":false,"des":""},{"value":"#(FORMITM_3)","name":"problem_status","require":false,"des":""},{"value":"#(FORMITM_5)","name":"resolution_text","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":"$(UUU)","name":"TTT","require":false,"des":""},{"value":null,"name":"user_name","require":false,"des":""},{"value":null,"name":"nowtime","require":false,"des":""}],"calculate":[{"from":null,"to":"$(UUU)","para2":null,"type":"form_creater","para1":null},{"from":"#G1(FORMITM_4)","to":"$(assignee_group)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_4)","to":"$(assignee)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"a = \"問題主旨：\"\nb = \"問題內容：\"\nc = \"受派組織：\"\nd = \"受派人：\"\ne = \"狀態：\"\nf = \"解決內容：\"\ng = \"解決時間：\"\nfrom omuser.models import OmUser,OmGroup\nfrom datetime import datetime as dt\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\ndef find_user_mail(user_id=None):\n    user_email = OmUser.objects.get(id=user_id)\n    email = user_email.email\n    return email\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"1\":\n        final_status = \"指派\"\n    elif status_id == \"2\":\n        final_status = \"調查中\"\n    elif status_id == \"3\":\n        final_status = \"完成\"\n    elif status_id == \"4\":\n        final_status = \"取消\"\n    return final_status\nEEE = status_format(problem_status)\nuser_name = find_user_mail(TTT)\nnowtime = dt.strftime(dt.now(),'%Y-%m-%d %H:%M:%S')\nAA = a + problem_summary + \"\\n\" \nBB = b + problem_note + \"\\n\"\nCC = c + assignee_group + \"\\n\"\nDD = d + assignee + \"\\n\"\nEE = e + EEE + \"\\n\"\nFF = f + resolution_text + \"\\n\"\nGG = g + nowtime + \"\\n\"\nfinal = AA + BB + CC + DD + EE + FF + GG","load_balance":false,"left":419.961},"top":0,"type":"python","left":0},{"id":"FITEM_26","text":"開單組合Mail資訊","config":{"error_pass":false,"top":100,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""}],"input":[{"value":"#(FORMITM_29)","name":"problem_summary","require":false,"des":""},{"value":"#(FORMITM_2)","name":"problem_note","require":false,"des":""},{"value":"$(group_name)","name":"group_name","require":false,"des":""},{"value":"$(assignee_name)","name":"assignee_name","require":false,"des":""},{"value":"#(FORMITM_3)","name":"problem_status","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""}],"calculate":[{"from":"#G1(FORMITM_4)","to":"$(group_name)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_4)","to":"$(assignee_name)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"a = \"問題主旨：\"\nb = \"問題內容：\"\nc = \"受派組織：\"\nd = \"受派人：\"\ne = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"1\":\n        final_status = \"指派\"\n    elif status_id == \"2\":\n        final_status = \"調查中\"\n    elif status_id == \"3\":\n        final_status = \"完成\"\n    elif status_id == \"4\":\n        final_status = \"取消\"\n    return final_status\nstatus_name = status_format(problem_status)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\n\nAA = a + problem_summary + \"\\n\" \nBB = b + problem_note + \"\\n\"\nCC = c + group_name + \"\\n\"\nDD = d + assignee_name + \"\\n\"\nEE = e + status_name + \"\\n\"\nfinal = AA + BB + CC + DD + EE","load_balance":false,"left":600},"top":0,"type":"python","left":0},{"id":"FLINE_MH39","config":{"linebox_top_width":30,"linebox_top":150,"source_item":"FITEM_14","source_side":"right","idcounter":39,"linebox_bottom_width":-30,"linebox_arrow_left":590,"linebox_long":0,"linebox_arrow_top":146,"target_item":"FITEM_26","target_side":"left","linebox_left":570},"type":"line"},{"id":"FLINE_MH40","config":{"linebox_top_width":30,"linebox_top":150,"source_item":"FITEM_26","source_side":"right","idcounter":40,"linebox_bottom_width":-30,"linebox_arrow_left":770,"linebox_long":0,"linebox_arrow_top":146,"target_item":"FITEM_6","target_side":"left","linebox_left":750},"type":"line"},{"id":"FITEM_27","text":"解決日期","config":{"top":1317.19,"output":[{"value":"#(FORMITM_7)","name":"$(CCC)","des":""}],"input":[{"value":"$(nowtime)","name":"#(FORMITM_7)","require":false,"des":""}],"calculate":[],"log":true,"left":419.969},"top":0,"type":"setform","left":0},{"id":"FLINE_MW43","config":{"linebox_top_width":-41.09500000000003,"linebox_top":1296.095,"source_item":"FITEM_24","source_side":"bottom","idcounter":43,"linebox_bottom_width":41.09500000000003,"linebox_arrow_left":475.969,"linebox_long":0.007999999999981355,"linebox_arrow_top":1327.19,"target_item":"FITEM_27","target_side":"top","linebox_left":479.961},"type":"line"},{"id":"FLINE_MW50","config":{"linebox_top_width":36.680000000000064,"linebox_top":1433.87,"source_item":"FITEM_27","source_side":"bottom","idcounter":50,"linebox_bottom_width":-36.679999999999836,"linebox_arrow_left":475.961,"linebox_long":0.007999999999981355,"linebox_arrow_top":1460.55,"target_item":"FITEM_12","target_side":"top","linebox_left":479.961},"type":"line"},{"id":"FLINE_MW51","config":{"linebox_top_width":-34.1400000000001,"linebox_top":1564.69,"source_item":"FITEM_12","source_side":"bottom","idcounter":51,"linebox_bottom_width":34.13999999999987,"linebox_arrow_left":475.969,"linebox_long":0.007999999999981355,"linebox_arrow_top":1588.83,"target_item":"FITEM_4","target_side":"top","linebox_left":479.961},"type":"line"},{"id":"FITEM_31","text":"判斷","config":{"calculate":[],"top":1040,"log":true,"rules":[{"value2":"4","rule":"=","target":"FITEM_24","value1":"#(FORMITM_3)"},{"value2":"5","rule":"=","target":"FITEM_34","value1":"#(FORMITM_3)"},{"value2":"3","rule":"=","target":"FITEM_35","value1":"#(FORMITM_3)"},{"value2":"1","rule":"=","target":"FITEM_32","value1":"#(FORMITM_3)"}],"left":420},"top":0,"type":"switch","left":0},{"id":"FLINE_MW52","config":{"linebox_top_width":42.5,"linebox_top":1017.5,"source_item":"FITEM_10","source_side":"bottom","idcounter":52,"linebox_bottom_width":-42.5,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":1050,"target_item":"FITEM_31","target_side":"top","linebox_left":480},"type":"line"},{"id":"FITEM_32","text":"狀態判斷","config":{"calculate":[],"top":300,"log":true,"rules":[{"value2":"4","rule":"=","target":"FITEM_33","value1":"#(FORMITM_3)"},{"value2":"5","rule":"=","target":"FITEM_34","value1":"#(FORMITM_3)"},{"value2":"1","rule":"=","target":"FITEM_39","value1":"#(FORMITM_3)"}],"left":420},"top":0,"type":"switch","left":0},{"id":"FLINE_MW55","config":{"linebox_top_width":20,"linebox_top":300,"source_item":"FITEM_7","source_side":"bottom","idcounter":55,"linebox_bottom_width":-20,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":310,"target_item":"FITEM_32","target_side":"top","linebox_left":480},"type":"line"},{"id":"FITEM_33","text":"問題解決","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":240,"input2":[],"action2_text":"","top":300,"flow_object":null,"input":[{"value":"3","name":"#(FORMITM_3)","require":false,"des":""}],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":14,"items":[{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_8","id":"FORMITM_3","config":{"value":"0","idcounter":3,"readonly":false,"title":"狀態","lists":[{"value":"4","text":"完成"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_8","id":"FORMITM_27","config":{"idcounter":27,"readonly":false,"title":"調查過程","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"解決內容","require":true,"regex":"","rows":"9"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_26","config":{"idcounter":26,"readonly":true,"title":"替代方案","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_14","config":{"color":"box box-danger","title":"問題單資訊區塊","idcounter":14},"hidden":false,"type":"box12"},{"parent":"FORMBOX_14","id":"FORMBOX_5","config":{"color":"box","title":"","idcounter":5},"hidden":false,"type":"box6"},{"parent":"FORMBOX_5","id":"FORMITM_28","config":{"value":"","idcounter":28,"readonly":false,"placeholder":"","title":"問題協調組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":false,"placeholder":"","title":"問題協調員","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_29","config":{"value":"","idcounter":29,"readonly":false,"placeholder":"","title":"問題主旨","require":true,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"idcounter":2,"readonly":false,"title":"問題內容","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":false,"title":"影響性(Impact)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":false,"title":"緊急性(Urgency)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"title":"優先等級(Priority)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_14","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"title":"問題種類","lists":[{"value":"high_incident","text":"常發生的事故單"},{"value":"not_routine","text":"非預期問題"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_18","config":{"value":"","idcounter":18,"readonly":false,"title":"問題分類","lists":[{"value":"hardware","text":"硬體"},{"value":"software","text":"軟體"},{"value":"other","text":"其他"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"組織","lists":[],"require":true,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"}],"status":[],"group":[],"title":false,"form_item_counter":29,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH57","config":{"linebox_top_width":-30,"linebox_top":350,"source_item":"FITEM_32","source_side":"left","idcounter":57,"linebox_bottom_width":30,"linebox_arrow_left":360,"linebox_long":0,"linebox_arrow_top":346,"target_item":"FITEM_33","target_side":"right","linebox_left":390},"type":"line"},{"id":"FLINE_MH58","config":{"linebox_top_width":100,"linebox_top":350,"source_item":"FITEM_33","source_side":"left","idcounter":58,"linebox_bottom_width":279.961,"linebox_arrow_left":409.961,"linebox_long":875,"linebox_arrow_top":1221,"target_item":"FITEM_24","target_side":"left","linebox_left":140},"type":"line"},{"id":"FITEM_34","text":"取消原因填寫","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"input2":[],"cform_object":null,"action2_text":"","top":450,"flow_object":null,"input":[],"calculate":[],"left":810,"subflow_id":"","action1_text":"","form_object":{"op1":[],"form_box_counter":12,"items":[{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_12","config":{"color":"box box-danger","title":"取消事故單區塊","idcounter":12},"hidden":false,"type":"box6"},{"parent":"FORMBOX_12","id":"FORMITM_20","config":{"idcounter":20,"readonly":false,"title":"取消說明","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":true,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":28,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH59","config":{"linebox_top_width":-135,"linebox_top":350,"source_item":"FITEM_32","source_side":"right","idcounter":59,"linebox_bottom_width":135,"linebox_arrow_left":800,"linebox_long":150,"linebox_arrow_top":496,"target_item":"FITEM_34","target_side":"left","linebox_left":675},"type":"line"},{"id":"FLINE_MH60","config":{"linebox_top_width":-330.03099999999995,"linebox_top":1628.83,"source_item":"FITEM_34","source_side":"bottom","idcounter":60,"linebox_bottom_width":-1098.83,"linebox_arrow_left":539.969,"linebox_long":0,"linebox_arrow_top":1624.83,"target_item":"FITEM_4","target_side":"right","linebox_left":870},"type":"line"},{"id":"FITEM_35","text":"調查問題","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":420,"input2":[],"action2_text":"","top":670,"input":[{"value":"2","name":"#(FORMITM_3)","require":false,"des":""}],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":14,"items":[{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_8","id":"FORMITM_3","config":{"value":"2","idcounter":3,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"調查中"},{"value":"3","text":"暫時方案"},{"value":"4","text":"完成"},{"value":"5","text":"取消"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_8","id":"FORMITM_27","config":{"idcounter":27,"readonly":false,"title":"調查過程","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"解決內容","require":false,"regex":"","rows":"9"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_26","config":{"idcounter":26,"readonly":false,"title":"替代方案","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":29,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW61","config":{"linebox_top_width":30,"linebox_top":660,"source_item":"FITEM_15","source_side":"bottom","idcounter":61,"linebox_bottom_width":-30,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":680,"target_item":"FITEM_35","target_side":"top","linebox_left":480},"type":"line"},{"id":"FITEM_36","text":"判斷","config":{"calculate":[],"top":780,"log":true,"rules":[{"value2":"5","rule":"=","target":"FITEM_34","value1":"#(FORMITM_3)"},{"value2":"4","rule":"=","target":"FITEM_10","value1":"#(FORMITM_3)"},{"value2":"3","rule":"=","target":"FITEM_38","value1":"#(FORMITM_3)"},{"value2":"2","rule":"=","target":"FITEM_35","value1":"#(FORMITM_3)"}],"left":420},"top":0,"type":"switch","left":0},{"id":"FLINE_MW68","config":{"linebox_top_width":25,"linebox_top":775,"source_item":"FITEM_35","source_side":"bottom","idcounter":68,"linebox_bottom_width":-25,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":790,"target_item":"FITEM_36","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MH70","config":{"linebox_top_width":135,"linebox_top":500,"source_item":"FITEM_36","source_side":"right","idcounter":70,"linebox_bottom_width":-135,"linebox_arrow_left":800,"linebox_long":330,"linebox_arrow_top":496,"target_item":"FITEM_34","target_side":"left","linebox_left":675},"type":"line"},{"id":"FITEM_38","text":"暫時方案","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":0,"input2":[],"action2_text":"","top":770,"input":[{"value":"3","name":"#(FORMITM_3)","require":false,"des":""}],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":16,"items":[{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_16","config":{"color":"box box-danger","title":"問題單資訊區塊","idcounter":16},"hidden":false,"type":"box12"},{"parent":"FORMBOX_8","id":"FORMITM_3","config":{"value":"0","idcounter":3,"readonly":false,"title":"狀態","lists":[{"value":"1","text":"指派"},{"value":"3","text":"替代方案"},{"value":"5","text":"取消"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_8","id":"FORMITM_27","config":{"idcounter":27,"readonly":false,"title":"調查過程","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_26","config":{"idcounter":26,"readonly":false,"title":"替代方案","require":true,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":true,"title":"解決內容","require":false,"regex":"","rows":"9"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_16","id":"FORMBOX_5","config":{"color":"box","title":"","idcounter":5},"hidden":false,"type":"box6"},{"parent":"FORMBOX_5","id":"FORMITM_28","config":{"value":"","idcounter":28,"readonly":false,"placeholder":"","title":"問題協調組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":false,"placeholder":"","title":"問題協調員","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_29","config":{"value":"","idcounter":29,"readonly":false,"placeholder":"","title":"問題主旨","require":true,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"idcounter":2,"readonly":false,"title":"問題內容","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":false,"title":"影響性(Impact)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":false,"title":"緊急性(Urgency)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"title":"優先等級(Priority)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_16","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"title":"問題種類","lists":[{"value":"high_incident","text":"常發生的事故單"},{"value":"not_routine","text":"非預期問題"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_18","config":{"value":"","idcounter":18,"readonly":false,"title":"問題分類","lists":[{"value":"hardware","text":"硬體"},{"value":"software","text":"軟體"},{"value":"other","text":"其他"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"組織","lists":[],"require":true,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"}],"status":[],"group":[],"title":false,"form_item_counter":29,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH75","config":{"linebox_top_width":360,"linebox_top":1090,"source_item":"FITEM_38","source_side":"bottom","idcounter":75,"linebox_bottom_width":-240,"linebox_arrow_left":410,"linebox_long":0,"linebox_arrow_top":1086,"target_item":"FITEM_31","target_side":"left","linebox_left":60},"type":"line"},{"id":"FLINE_MW76","config":{"linebox_top_width":27.5,"linebox_top":887.5,"source_item":"FITEM_36","source_side":"bottom","idcounter":76,"linebox_bottom_width":-27.5,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":905,"target_item":"FITEM_10","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MH79","config":{"linebox_top_width":-150,"linebox_top":820,"source_item":"FITEM_36","source_side":"left","idcounter":79,"linebox_bottom_width":150,"linebox_arrow_left":120,"linebox_long":10,"linebox_arrow_top":816,"target_item":"FITEM_38","target_side":"right","linebox_left":270},"type":"line"},{"id":"FLINE_MW82","config":{"linebox_top_width":37.5,"linebox_top":1157.5,"source_item":"FITEM_31","source_side":"bottom","idcounter":82,"linebox_bottom_width":-37.5,"linebox_arrow_left":475.961,"linebox_long":0.03899999999998727,"linebox_arrow_top":1185,"target_item":"FITEM_24","target_side":"top","linebox_left":479.961},"type":"line"},{"id":"FLINE_MH83","config":{"linebox_top_width":135,"linebox_top":500,"source_item":"FITEM_31","source_side":"right","idcounter":83,"linebox_bottom_width":-135,"linebox_arrow_left":800,"linebox_long":590,"linebox_arrow_top":496,"target_item":"FITEM_34","target_side":"left","linebox_left":675},"type":"line"},{"id":"FLINE_MH84","config":{"linebox_top_width":100,"linebox_top":720,"source_item":"FITEM_31","source_side":"right","idcounter":84,"linebox_bottom_width":100,"linebox_arrow_left":540,"linebox_long":370,"linebox_arrow_top":716,"target_item":"FITEM_35","target_side":"right","linebox_left":640},"type":"line"},{"id":"FITEM_39","text":"組合指派資訊","config":{"error_pass":false,"top":425,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""}],"input":[{"value":"#(FORMITM_29)","name":"problem_summary","require":false,"des":""},{"value":"#(FORMITM_2)","name":"problem_note","require":false,"des":""},{"value":"$(group_name)","name":"group_name","require":false,"des":""},{"value":"$(assignee_name)","name":"assignee_name","require":false,"des":""},{"value":"#(FORMITM_3)","name":"problem_status","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""}],"calculate":[{"from":"#G1(FORMITM_4)","to":"$(group_name)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_4)","to":"$(assignee_name)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"a = \"問題主旨：\"\nb = \"問題內容：\"\nc = \"受派組織：\"\nd = \"受派人：\"\ne = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"1\":\n        final_status = \"指派\"\n    elif status_id == \"2\":\n        final_status = \"調查中\"\n    elif status_id == \"3\":\n        final_status = \"完成\"\n    elif status_id == \"4\":\n        final_status = \"取消\"\n    return final_status\nEEE = status_format(problem_status)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\n\nAA = a + problem_summary + \"\\n\" \nBB = b + problem_note + \"\\n\"\nCC = c + group_name + \"\\n\"\nDD = d + assignee_name + \"\\n\"\nEE = e + EEE + \"\\n\"\nfinal = AA + BB + CC + DD + EE","load_balance":false,"left":420},"top":0,"type":"python","left":0},{"id":"FLINE_MW85","config":{"linebox_top_width":32.5,"linebox_top":412.5,"source_item":"FITEM_32","source_side":"bottom","idcounter":85,"linebox_bottom_width":-32.5,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":435,"target_item":"FITEM_39","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MW86","config":{"linebox_top_width":32.5,"linebox_top":537.5,"source_item":"FITEM_39","source_side":"bottom","idcounter":86,"linebox_bottom_width":-32.5,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":560,"target_item":"FITEM_15","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MW87","config":{"linebox_top_width":20,"linebox_top":200,"source_item":"FITEM_14","source_side":"bottom","idcounter":87,"linebox_bottom_width":-20,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":210,"target_item":"FITEM_7","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MH88","config":{"linebox_top_width":150,"linebox_top":"720","source_item":"FITEM_36","source_side":"left","idcounter":88,"linebox_bottom_width":150,"linebox_arrow_left":410,"linebox_long":110,"linebox_arrow_top":716,"target_item":"FITEM_35","target_side":"left","linebox_left":"270"},"type":"line"},{"id":"FLINE_MH89","config":{"linebox_top_width":100,"linebox_top":350,"source_item":"FITEM_31","source_side":"right","idcounter":89,"linebox_bottom_width":100,"linebox_arrow_left":540,"linebox_long":740,"linebox_arrow_top":346,"target_item":"FITEM_32","target_side":"right","linebox_left":640},"type":"line"}],"version":16777216,"subflow":[],"uid":1589768387021,"form_object":{"op1":[],"form_box_counter":21,"items":[{"parent":"public","id":"FORMBOX_4","config":{"color":"box box-danger","title":"問題單資訊區塊","idcounter":4},"hidden":false,"type":"box12"},{"parent":"FORMBOX_4","id":"FORMBOX_5","config":{"color":"box","title":"","idcounter":5},"hidden":false,"type":"box6"},{"parent":"FORMBOX_4","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"public","id":"FORMBOX_7","config":{"color":"box","title":"","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMBOX_8","config":{"color":"box box-success","title":"解決資訊","idcounter":8},"hidden":false,"type":"box6"},{"parent":"FORMBOX_7","id":"FORMBOX_9","config":{"color":"box box-default","title":"其他資訊","idcounter":9},"hidden":false,"type":"box6"},{"parent":"FORMBOX_9","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":true,"placeholder":"","title":"建立時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":true,"placeholder":"","title":"解決時間","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":true,"placeholder":"","title":"開單人所屬群組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_9","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":true,"placeholder":"","title":"開單人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"title":"問題種類","lists":[{"value":"high_incident","text":"常發生的事故單"},{"value":"not_routine","text":"非預期問題"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_18","config":{"value":"","idcounter":18,"readonly":false,"title":"問題分類","lists":[{"value":"hardware","text":"硬體"},{"value":"software","text":"軟體"},{"value":"other","text":"其他"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_6","id":"FORMITM_3","config":{"value":"0","idcounter":3,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"指派"},{"value":"2","text":"調查中"},{"value":"3","text":"替代方案"},{"value":"4","text":"完成"},{"value":"5","text":"取消"}],"require":false},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_6","id":"FORMITM_4","config":{"value":"","idcounter":4,"readonly":false,"group_title":"組織","lists":[],"require":true,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"public","id":"FORMBOX_10","config":{"color":"box","title":"","idcounter":10},"hidden":false,"type":"box12"},{"parent":"FORMBOX_10","id":"FORMBOX_12","config":{"color":"box box-danger","title":"取消問題單區塊","idcounter":12},"hidden":false,"type":"box6"},{"parent":"FORMBOX_12","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"取消說明","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"調查過程","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_26","config":{"idcounter":26,"readonly":true,"title":"替代方案","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_8","id":"FORMITM_5","config":{"idcounter":5,"readonly":true,"title":"解決內容","require":false,"regex":"","rows":"9"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_28","config":{"value":"","idcounter":28,"readonly":false,"placeholder":"","title":"問題協調組","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":false,"placeholder":"","title":"問題協調員","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_29","config":{"value":"","idcounter":29,"readonly":false,"placeholder":"","title":"問題主旨","require":true,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"idcounter":2,"readonly":false,"title":"問題內容","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":false,"title":"影響性(Impact)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":false,"title":"緊急性(Urgency)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_5","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"title":"優先等級(Priority)","lists":[{"value":"4","text":"嚴重"},{"value":"3","text":"高"},{"value":"2","text":"中"},{"value":"1","text":"低"}],"require":false},"hidden":false,"type":"list"}],"status":[],"group":[],"title":false,"form_item_counter":29,"op2":[],"user":[],"level":[]}}},{"config":{"name":"變更管理","display_field":0,"status_field":0,"mission":true,"search_field":0,"worklog":true,"title_field":0,"fp_show":true,"relation":true,"flowlog":true,"permission":[],"attachment":true,"api":true,"history":true,"subflow":[{"name":"標準變更","description":"","uid":"1591066173039"},{"name":"一般變更","description":"","uid":"1591066179131"},{"name":"緊急變更","description":"","uid":"1591066102754"},{"name":"新建","description":"","uid":"1591775681281"},{"name":"變更審核","description":"","uid":"1591777027098"},{"name":"計畫階段","description":"","uid":"1591840172207"},{"name":"已排程","description":"","uid":"1591845005124"},{"name":"完成","description":"","uid":"1591854325540"},{"name":"結案","description":"","uid":"1591857437069"},{"name":"變更取消","description":"","uid":"1591866235185"}],"description":""},"flow_app_id__app_name":"服務管理","flow_name":"變更管理","description":"","flowobject":{"is_sub":false,"flow_line_counter":53,"flow_item_counter":34,"items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":510,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":1844.18,"left":510,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_15","text":"新建","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""}],"top":150,"left":510,"subflow_output":[{"value":"result","name":null,"des":""},{"value":"ap_count_first","name":"$(ap_count_first)","des":""}],"log":true,"subflow_id":"1591775681281"},"top":0,"type":"subflow","left":0},{"id":"FLINE_MW19","config":{"linebox_top_width":45,"linebox_top":125,"source_item":"FITEM_1","source_side":"bottom","idcounter":19,"linebox_bottom_width":-45,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":160,"target_item":"FITEM_15","target_side":"top","linebox_left":570},"type":"line"},{"id":"FITEM_16","text":"開發前審核","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""},{"value":"$(ap_count_first)","name":"ap_count_first","require":false,"des":""}],"top":350,"left":510,"subflow_output":[{"value":"result","name":null,"des":""},{"value":"ap_status","name":"$(ap_status)","des":""}],"log":true,"subflow_id":"1591777027098"},"top":0,"type":"subflow","left":0},{"id":"FITEM_17","text":"計畫階段","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""}],"top":575,"left":510,"subflow_output":[{"value":"result","name":null,"des":""}],"log":true,"subflow_id":"1591840172207"},"top":0,"type":"subflow","left":0},{"id":"FITEM_18","text":"上線前審核","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""}],"top":850,"left":510,"subflow_output":[{"value":"result","name":"$(result)","des":""},{"value":"ap_status","name":"$(ap_status)","des":""}],"log":true,"subflow_id":"1591777027098"},"top":0,"type":"subflow","left":0},{"id":"FITEM_19","text":"已排程","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""}],"top":1091.25,"left":510,"subflow_output":[{"value":"result","name":null,"des":""}],"log":true,"subflow_id":"1591845005124"},"top":0,"type":"subflow","left":0},{"id":"FITEM_20","text":"完成","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""}],"top":1355,"left":510,"subflow_output":[{"value":"result","name":null,"des":""}],"log":true,"subflow_id":"1591854325540"},"top":0,"type":"subflow","left":0},{"id":"FITEM_22","text":"結案審核","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""}],"top":1590,"left":510,"subflow_output":[{"value":"result","name":null,"des":""}],"log":true,"subflow_id":"1591777027098"},"top":0,"type":"subflow","left":0},{"id":"FITEM_23","text":"結案","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""}],"top":1715,"left":510,"subflow_output":[{"value":"result","name":null,"des":""}],"log":true,"subflow_id":"1591857437069"},"top":0,"type":"subflow","left":0},{"id":"FLINE_MW31","config":{"linebox_top_width":32.5,"linebox_top":1702.5,"source_item":"FITEM_22","source_side":"bottom","idcounter":31,"linebox_bottom_width":-32.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":1725,"target_item":"FITEM_23","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW32","config":{"linebox_top_width":34.58999999999992,"linebox_top":1829.5900000000001,"source_item":"FITEM_23","source_side":"bottom","idcounter":32,"linebox_bottom_width":-34.590000000000146,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":1854.18,"target_item":"FITEM_4","target_side":"top","linebox_left":570},"type":"line"},{"id":"FITEM_24","text":"開發前審核狀態判斷","config":{"calculate":[],"top":450,"log":true,"rules":[{"value2":"00","rule":"=","target":"FITEM_17","value1":"$(ap_status)"},{"value2":"11","rule":"=","target":"FITEM_15","value1":"$(ap_status)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW33","config":{"linebox_top_width":20,"linebox_top":450,"source_item":"FITEM_16","source_side":"bottom","idcounter":33,"linebox_bottom_width":-20,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":460,"target_item":"FITEM_24","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW34","config":{"linebox_top_width":32.5,"linebox_top":562.5,"source_item":"FITEM_24","source_side":"bottom","idcounter":34,"linebox_bottom_width":-32.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":585,"target_item":"FITEM_17","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MH35","config":{"linebox_top_width":100,"linebox_top":200,"source_item":"FITEM_24","source_side":"right","idcounter":35,"linebox_bottom_width":100,"linebox_arrow_left":630,"linebox_long":300,"linebox_arrow_top":196,"target_item":"FITEM_15","target_side":"right","linebox_left":730},"type":"line"},{"id":"FITEM_25","text":"上線前審核狀態判斷","config":{"calculate":[],"top":975,"log":true,"rules":[{"value2":"00","rule":"=","target":"FITEM_19","value1":"$(ap_status)"},{"value2":"11","rule":"=","target":"FITEM_17","value1":"$(ap_status)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW36","config":{"linebox_top_width":32.5,"linebox_top":962.5,"source_item":"FITEM_18","source_side":"bottom","idcounter":36,"linebox_bottom_width":-32.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":985,"target_item":"FITEM_25","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW37","config":{"linebox_top_width":28.125,"linebox_top":1083.125,"source_item":"FITEM_25","source_side":"bottom","idcounter":37,"linebox_bottom_width":-28.125,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":1101.25,"target_item":"FITEM_19","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MH38","config":{"linebox_top_width":100,"linebox_top":625,"source_item":"FITEM_25","source_side":"right","idcounter":38,"linebox_bottom_width":100,"linebox_arrow_left":630,"linebox_long":400,"linebox_arrow_top":621,"target_item":"FITEM_17","target_side":"right","linebox_left":730},"type":"line"},{"id":"FITEM_27","text":"取消變更判斷","config":{"calculate":[],"top":249.979,"log":true,"rules":[{"value2":"8","rule":"!=","target":"FITEM_16","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_28","value1":"#(FORMITM_11)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW39","config":{"linebox_top_width":19.98950000000002,"linebox_top":249.98950000000002,"source_item":"FITEM_15","source_side":"bottom","idcounter":39,"linebox_bottom_width":-19.98950000000002,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":259.97900000000004,"target_item":"FITEM_27","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW40","config":{"linebox_top_width":20.01049999999998,"linebox_top":349.9895,"source_item":"FITEM_27","source_side":"bottom","idcounter":40,"linebox_bottom_width":-20.01049999999998,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":360,"target_item":"FITEM_16","target_side":"top","linebox_left":570},"type":"line"},{"id":"FITEM_28","text":"取消變更","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"result","require":false,"des":""}],"top":249.958,"left":240,"subflow_output":[{"value":"result","name":"$(result)","des":""},{"value":"status","name":"$(status)","des":""}],"log":true,"subflow_id":"1591866235185"},"top":0,"type":"subflow","left":0},{"id":"FLINE_MH41","config":{"linebox_top_width":-75,"linebox_top":299.95799999999997,"source_item":"FITEM_27","source_side":"left","idcounter":41,"linebox_bottom_width":75,"linebox_arrow_left":360,"linebox_long":0.02100000000007185,"linebox_arrow_top":295.95799999999997,"target_item":"FITEM_28","target_side":"right","linebox_left":435},"type":"line"},{"id":"FITEM_29","text":"取消變更判斷","config":{"calculate":[],"top":705,"log":true,"rules":[{"value2":"8","rule":"!=","target":"FITEM_18","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_28","value1":"#(FORMITM_11)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW42","config":{"linebox_top_width":35,"linebox_top":690,"source_item":"FITEM_17","source_side":"bottom","idcounter":42,"linebox_bottom_width":-35,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":715,"target_item":"FITEM_29","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW43","config":{"linebox_top_width":42.5,"linebox_top":827.5,"source_item":"FITEM_29","source_side":"bottom","idcounter":43,"linebox_bottom_width":-42.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":860,"target_item":"FITEM_18","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MH44","config":{"linebox_top_width":-75,"linebox_top":299.95799999999997,"source_item":"FITEM_29","source_side":"left","idcounter":44,"linebox_bottom_width":75,"linebox_arrow_left":360,"linebox_long":455.04200000000003,"linebox_arrow_top":295.95799999999997,"target_item":"FITEM_28","target_side":"right","linebox_left":435},"type":"line"},{"id":"FITEM_30","text":"取消變更判斷","config":{"calculate":[],"top":1230,"log":true,"rules":[{"value2":"8","rule":"!=","target":"FITEM_20","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_28","value1":"#(FORMITM_11)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW45","config":{"linebox_top_width":39.375,"linebox_top":1210.625,"source_item":"FITEM_19","source_side":"bottom","idcounter":45,"linebox_bottom_width":-39.375,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":1240,"target_item":"FITEM_30","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW46","config":{"linebox_top_width":32.5,"linebox_top":1342.5,"source_item":"FITEM_30","source_side":"bottom","idcounter":46,"linebox_bottom_width":-32.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":1365,"target_item":"FITEM_20","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MH47","config":{"linebox_top_width":-75,"linebox_top":299.95799999999997,"source_item":"FITEM_30","source_side":"left","idcounter":47,"linebox_bottom_width":75,"linebox_arrow_left":360,"linebox_long":980.042,"linebox_arrow_top":295.95799999999997,"target_item":"FITEM_28","target_side":"right","linebox_left":435},"type":"line"},{"id":"FITEM_31","text":"取消變更判斷","config":{"calculate":[],"top":1475,"log":true,"rules":[{"value2":"8","rule":"!=","target":"FITEM_22","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_28","value1":"#(FORMITM_11)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW48","config":{"linebox_top_width":30,"linebox_top":1465,"source_item":"FITEM_20","source_side":"bottom","idcounter":48,"linebox_bottom_width":-30,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":1485,"target_item":"FITEM_31","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW49","config":{"linebox_top_width":27.5,"linebox_top":1582.5,"source_item":"FITEM_31","source_side":"bottom","idcounter":49,"linebox_bottom_width":-27.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":1600,"target_item":"FITEM_22","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MH50","config":{"linebox_top_width":-75,"linebox_top":299.95799999999997,"source_item":"FITEM_31","source_side":"left","idcounter":50,"linebox_bottom_width":75,"linebox_arrow_left":360,"linebox_long":1225.042,"linebox_arrow_top":295.95799999999997,"target_item":"FITEM_28","target_side":"right","linebox_left":435},"type":"line"},{"id":"FITEM_34","text":"取消回朔判斷","config":{"calculate":[],"top":250,"log":true,"rules":[{"value2":"0","rule":"=","target":"FITEM_15","value1":"$(status)"},{"value2":"8","rule":"=","target":"FITEM_4","value1":"$(status)"}],"left":60},"top":0,"type":"switch","left":0},{"id":"FLINE_MH51","config":{"linebox_top_width":30,"linebox_top":299.95799999999997,"source_item":"FITEM_28","source_side":"left","idcounter":51,"linebox_bottom_width":-30,"linebox_arrow_left":180,"linebox_long":0.04200000000003001,"linebox_arrow_top":296,"target_item":"FITEM_34","target_side":"right","linebox_left":210},"type":"line"},{"id":"FLINE_MH52","config":{"linebox_top_width":510,"linebox_top":200,"source_item":"FITEM_34","source_side":"left","idcounter":52,"linebox_bottom_width":60,"linebox_arrow_left":500,"linebox_long":100,"linebox_arrow_top":196,"target_item":"FITEM_15","target_side":"left","linebox_left":0},"type":"line"},{"id":"FLINE_MH53","config":{"linebox_top_width":390,"linebox_top":1894.18,"source_item":"FITEM_34","source_side":"bottom","idcounter":53,"linebox_bottom_width":-1564.18,"linebox_arrow_left":500,"linebox_long":0,"linebox_arrow_top":1890.18,"target_item":"FITEM_4","target_side":"left","linebox_left":120},"type":"line"}],"version":16777216,"subflow":[{"name":"標準變更","is_sub":false,"flow_line_counter":61,"flow_item_counter":21,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":30,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"變更分類與狀態","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":990,"input2":[],"action2_text":"","top":0,"form_setdata":[],"input":[{"value":"2","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_16","config":{"color":"box box-success","title":"步驟資訊","idcounter":16},"hidden":false,"type":"box12"},{"parent":"FORMBOX_16","id":"FORMITM_23","config":{"value":"","idcounter":23,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案","title":"變更流程步驟","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_17","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":17},"hidden":false,"type":"box12"},{"parent":"FORMBOX_17","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_17","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_17","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_17","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_19","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":19},"hidden":false,"type":"box12"},{"parent":"FORMBOX_19","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"計畫階段"},{"value":"4","text":"已排程"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_19","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_3","text":"排程狀態判斷","config":{"calculate":[],"top":115,"log":true,"rules":[{"value2":"4","rule":"=","target":"FITEM_8","value1":"#(FORMITM_11)"},{"value2":"2","rule":"=","target":"FITEM_2","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_21","value1":"#(FORMITM_11)"}],"left":990},"top":0,"type":"switch","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":290.469,"left":660,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FLINE_MW6","config":{"linebox_top_width":27.5,"linebox_top":107.5,"source_item":"FITEM_2","source_side":"bottom","idcounter":6,"linebox_bottom_width":-27.5,"linebox_arrow_left":1046,"linebox_long":0,"linebox_arrow_top":125,"target_item":"FITEM_3","target_side":"top","linebox_left":1050},"type":"line"},{"id":"FITEM_7","text":"完成狀態判斷","config":{"calculate":[],"top":422.754,"log":true,"rules":[{"value2":"2","rule":"=","target":"FITEM_2","value1":"#(FORMITM_11)"},{"value2":"4","rule":"=","target":"FITEM_8","value1":"#(FORMITM_11)"},{"value2":"5","rule":"=","target":"FITEM_16","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_21","value1":"#(FORMITM_11)"}],"left":990},"top":0,"type":"switch","left":0},{"id":"FITEM_8","text":"排程部署時間輸入","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":990,"input2":[],"action2_text":"","top":300,"input":[{"value":"4","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_20","config":{"color":"box box-success","title":"步驟資訊","idcounter":20},"hidden":false,"type":"box12"},{"parent":"FORMBOX_20","id":"FORMITM_24","config":{"value":"","idcounter":24,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案","title":"變更流程步驟","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_21","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":21},"hidden":false,"type":"box12"},{"parent":"FORMBOX_21","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_21","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_21","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_21","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_22","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":22},"hidden":false,"type":"box12"},{"parent":"FORMBOX_22","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"計畫階段"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_22","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW7","config":{"linebox_top_width":62.5,"linebox_top":257.5,"source_item":"FITEM_3","source_side":"bottom","idcounter":7,"linebox_bottom_width":-62.5,"linebox_arrow_left":1046,"linebox_long":0,"linebox_arrow_top":310,"target_item":"FITEM_8","target_side":"top","linebox_left":1050},"type":"line"},{"id":"FLINE_MW8","config":{"linebox_top_width":31.37700000000001,"linebox_top":411.377,"source_item":"FITEM_8","source_side":"bottom","idcounter":8,"linebox_bottom_width":-31.37700000000001,"linebox_arrow_left":1046,"linebox_long":0,"linebox_arrow_top":432.754,"target_item":"FITEM_7","target_side":"top","linebox_left":1050},"type":"line"},{"id":"FITEM_10","text":"結案狀態變更","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":420,"input2":[],"action2_text":"","top":619.375,"input":[{"value":"5","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_23","config":{"color":"box box-success","title":"步驟資訊","idcounter":23},"hidden":false,"type":"box12"},{"parent":"FORMBOX_23","id":"FORMITM_25","config":{"value":"","idcounter":25,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案","title":"標準變更流程","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_24","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":24},"hidden":false,"type":"box12"},{"parent":"FORMBOX_24","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_24","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_24","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_24","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_25","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":25},"hidden":false,"type":"box12"},{"parent":"FORMBOX_25","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"5","text":"完成"},{"value":"7","text":"結案"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_25","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH11","config":{"linebox_top_width":100,"linebox_top":50,"source_item":"FITEM_7","source_side":"right","idcounter":11,"linebox_bottom_width":100,"linebox_arrow_left":1110,"linebox_long":422.754,"linebox_arrow_top":46,"target_item":"FITEM_2","target_side":"right","linebox_left":1210},"type":"line"},{"id":"FLINE_MH13","config":{"linebox_top_width":100,"linebox_top":50,"source_item":"FITEM_3","source_side":"left","idcounter":13,"linebox_bottom_width":100,"linebox_arrow_left":980,"linebox_long":115,"linebox_arrow_top":46,"target_item":"FITEM_2","target_side":"left","linebox_left":890},"type":"line"},{"id":"FLINE_MH14","config":{"linebox_top_width":100,"linebox_top":350,"source_item":"FITEM_7","source_side":"left","idcounter":14,"linebox_bottom_width":100,"linebox_arrow_left":980,"linebox_long":122.75400000000002,"linebox_arrow_top":346,"target_item":"FITEM_8","target_side":"left","linebox_left":890},"type":"line"},{"id":"FITEM_11","text":"結案判斷","config":{"calculate":[],"top":530,"log":true,"rules":[{"value2":"5","rule":"=","target":"FITEM_10","value1":"#(FORMITM_11)"},{"value2":"7","rule":"=","target":"FITEM_17","value1":"#(FORMITM_11)"}],"left":180},"top":0,"type":"switch","left":0},{"id":"FITEM_12","text":"變更開單組合","config":{"error_pass":false,"top":0,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    ccc_name = \"\"\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nfinal = AA + BB + CC + DD + EE\nsummary_final = change_summary + \"   變更單已經指派給您\"","load_balance":false,"left":240},"top":0,"type":"python","left":0},{"id":"FITEM_13","text":"變更開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":0,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":450},"top":0,"type":"outflow","left":0},{"id":"FITEM_15","text":"變更部署時間Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":608.887,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":720},"top":0,"type":"outflow","left":0},{"id":"FLINE_MH24","config":{"linebox_top_width":45,"linebox_top":50,"source_item":"FITEM_1","source_side":"right","idcounter":24,"linebox_bottom_width":-45,"linebox_arrow_left":230,"linebox_long":0,"linebox_arrow_top":46,"target_item":"FITEM_12","target_side":"left","linebox_left":195},"type":"line"},{"id":"FLINE_MH25","config":{"linebox_top_width":45,"linebox_top":50,"source_item":"FITEM_12","source_side":"right","idcounter":25,"linebox_bottom_width":-45,"linebox_arrow_left":440,"linebox_long":0,"linebox_arrow_top":46,"target_item":"FITEM_13","target_side":"left","linebox_left":405},"type":"line"},{"id":"FLINE_MH27","config":{"linebox_top_width":210,"linebox_top":50,"source_item":"FITEM_13","source_side":"right","idcounter":27,"linebox_bottom_width":-210,"linebox_arrow_left":980,"linebox_long":0,"linebox_arrow_top":46,"target_item":"FITEM_2","target_side":"left","linebox_left":780},"type":"line"},{"id":"FLINE_MH31","config":{"linebox_top_width":90,"linebox_top":658.887,"source_item":"FITEM_15","source_side":"left","idcounter":31,"linebox_bottom_width":-90,"linebox_arrow_left":540,"linebox_long":10.488000000000056,"linebox_arrow_top":665.375,"target_item":"FITEM_10","target_side":"right","linebox_left":630},"type":"line"},{"id":"FLINE_MH36","config":{"linebox_top_width":-60,"linebox_top":580,"source_item":"FITEM_10","source_side":"left","idcounter":36,"linebox_bottom_width":60,"linebox_arrow_left":300,"linebox_long":89.375,"linebox_arrow_top":576,"target_item":"FITEM_11","target_side":"right","linebox_left":360},"type":"line"},{"id":"FLINE_MH41","config":{"linebox_top_width":180,"linebox_top":669.375,"source_item":"FITEM_11","source_side":"bottom","idcounter":41,"linebox_bottom_width":-59.375,"linebox_arrow_left":410,"linebox_long":0,"linebox_arrow_top":665.375,"target_item":"FITEM_10","target_side":"left","linebox_left":240},"type":"line"},{"id":"FITEM_16","text":"變更佈署時間組合","config":{"error_pass":false,"top":616.25,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":"#(FORMITM_16)","name":"change_deploy_start_date","require":false,"des":""},{"value":"#(FORMITM_17)","name":"change_deploy_end_date","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_deploy_start_date_t = \"部署開始時間：\"\nc_deploy_end_date_t = \"部署結束時間：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nFF = c_deploy_start_date_t + change_deploy_start_date + \"\\n\"\nGG = c_deploy_end_date_t + change_deploy_end_date + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nfinal = AA + BB + FF + GG + CC + DD + EE\nsummary_final = \"變更單：\" + change_summary + \"  已設定佈署時間\"","load_balance":false,"left":990},"top":0,"type":"python","left":0},{"id":"FLINE_MH43","config":{"linebox_top_width":-75,"linebox_top":658.887,"source_item":"FITEM_16","source_side":"left","idcounter":43,"linebox_bottom_width":75,"linebox_arrow_left":840,"linebox_long":7.363000000000056,"linebox_arrow_top":654.887,"target_item":"FITEM_15","target_side":"right","linebox_left":915},"type":"line"},{"id":"FLINE_MW44","config":{"linebox_top_width":66.74800000000005,"linebox_top":569.502,"source_item":"FITEM_7","source_side":"bottom","idcounter":44,"linebox_bottom_width":-66.74799999999993,"linebox_arrow_left":1046,"linebox_long":0,"linebox_arrow_top":626.25,"target_item":"FITEM_16","target_side":"top","linebox_left":1050},"type":"line"},{"id":"FITEM_17","text":"變更結案資訊組合","config":{"error_pass":false,"top":280,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":"#(FORMITM_16)","name":"change_deploy_start_date","require":false,"des":""},{"value":"#(FORMITM_17)","name":"change_deploy_end_date","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""},{"value":null,"name":"nowtime","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_deploy_start_date_t = \"部署開始時間：\"\nc_deploy_end_date_t = \"部署結束時間：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nc_complete_time_t = \"完成日期：\"\nfrom omuser.models import OmUser,OmGroup\nfrom datetime import datetime as dt\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\nnowtime = dt.strftime(dt.now(),'%Y-%m-%d %H:%M:%S')\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nFF = c_deploy_start_date_t + change_deploy_start_date + \"\\n\"\nGG = c_deploy_end_date_t + change_deploy_end_date + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nHH = c_complete_time_t + nowtime + \"\\n\"\nfinal = AA + BB + FF + GG + CC + DD + EE + HH\nsummary_final = \"變更單已經結案\"","load_balance":false,"left":30},"top":0,"type":"python","left":0},{"id":"FITEM_18","text":"變更開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":283.887,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":480},"top":0,"type":"outflow","left":0},{"id":"FLINE_MH49","config":{"linebox_top_width":30,"linebox_top":330,"source_item":"FITEM_11","source_side":"left","idcounter":49,"linebox_bottom_width":180,"linebox_arrow_left":20,"linebox_long":250,"linebox_arrow_top":326,"target_item":"FITEM_17","target_side":"left","linebox_left":0},"type":"line"},{"id":"FITEM_20","text":"完成時間欄位設定","config":{"top":280,"output":[],"input":[{"value":"$(nowtime)","name":"#(FORMITM_15)","require":false,"des":""}],"calculate":[{"from":null,"to":null,"para2":null,"type":"--","para1":null}],"log":true,"left":210},"top":0,"type":"setform","left":0},{"id":"FLINE_MH54","config":{"linebox_top_width":-75,"linebox_top":330,"source_item":"FITEM_20","source_side":"right","idcounter":54,"linebox_bottom_width":75,"linebox_arrow_left":470,"linebox_long":3.8870000000000005,"linebox_arrow_top":329.887,"target_item":"FITEM_18","target_side":"left","linebox_left":405},"type":"line"},{"id":"FLINE_MH57","config":{"linebox_top_width":30,"linebox_top":330,"source_item":"FITEM_17","source_side":"right","idcounter":57,"linebox_bottom_width":-30,"linebox_arrow_left":200,"linebox_long":0,"linebox_arrow_top":326,"target_item":"FITEM_20","target_side":"left","linebox_left":180},"type":"line"},{"id":"FLINE_MH58","config":{"linebox_top_width":-30,"linebox_top":333.887,"source_item":"FITEM_18","source_side":"right","idcounter":58,"linebox_bottom_width":30,"linebox_arrow_left":650,"linebox_long":6.581999999999994,"linebox_arrow_top":336.469,"target_item":"FITEM_4","target_side":"left","linebox_left":630},"type":"line"},{"id":"FITEM_21","text":"取消原因 人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":660,"input2":[],"action2_text":"","top":150,"input":[],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"8","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":false,"title":"取消原因填寫","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH59","config":{"linebox_top_width":100,"linebox_top":"165","source_item":"FITEM_3","source_side":"left","idcounter":59,"linebox_bottom_width":-110,"linebox_arrow_left":780,"linebox_long":35,"linebox_arrow_top":196,"target_item":"FITEM_21","target_side":"right","linebox_left":"890"},"type":"line"},{"id":"FLINE_MW60","config":{"linebox_top_width":40.23449999999997,"linebox_top":270.2345,"source_item":"FITEM_21","source_side":"bottom","idcounter":60,"linebox_bottom_width":-40.234500000000025,"linebox_arrow_left":716,"linebox_long":0,"linebox_arrow_top":300.469,"target_item":"FITEM_4","target_side":"top","linebox_left":720},"type":"line"},{"id":"FLINE_MH61","config":{"linebox_top_width":-105,"linebox_top":200,"source_item":"FITEM_7","source_side":"left","idcounter":61,"linebox_bottom_width":105,"linebox_arrow_left":780,"linebox_long":272.754,"linebox_arrow_top":196,"target_item":"FITEM_21","target_side":"right","linebox_left":885},"type":"line"}],"version":16777216,"subflow":[],"uid":1591066173039,"form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核人清單","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_19","config":{"idcounter":19,"readonly":true,"title":"審核時間資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},{"name":"一般變更","is_sub":false,"flow_line_counter":130,"flow_item_counter":47,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":600,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"變更分類與狀態","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":613.75,"input2":[],"action2_text":"","top":315,"form_setdata":[],"input":[{"value":"0","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":false,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":2874.22,"left":450,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_7","text":"完成狀態判斷","config":{"calculate":[],"top":1487.73,"log":true,"rules":[{"value2":"4","rule":"=","target":"FITEM_34","value1":"#(FORMITM_11)"},{"value2":"5","rule":"=","target":"FITEM_16","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_42","value1":"#(FORMITM_11)"}],"left":450},"top":0,"type":"switch","left":0},{"id":"FITEM_8","text":"計畫階段到審核 人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":450,"input2":[],"action2_text":"","top":840,"input":[{"value":"2","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":false,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"2","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_10","text":"完成到結案審核 人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":450,"input2":[],"action2_text":"","top":1835.63,"input":[{"value":"5","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":false,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"5","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"5","text":"完成"},{"value":"6","text":"結案審核"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_11","text":"結案判斷","config":{"calculate":[],"top":1930,"log":true,"rules":[{"value2":"5","rule":"=","target":"FITEM_10","value1":"#(FORMITM_11)"},{"value2":"6","rule":"=","target":"FITEM_47","value1":"#(FORMITM_11)"}],"left":450},"top":0,"type":"switch","left":0},{"id":"FITEM_12","text":"變更開單組合","config":{"error_pass":false,"top":100,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    ccc_name = \"\"\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nfinal = AA + BB + CC + DD + EE\nsummary_final = change_summary + \"   變更單已經指派給您\"","load_balance":false,"left":600},"top":0,"type":"python","left":0},{"id":"FITEM_13","text":"變更開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":200,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":600},"top":0,"type":"outflow","left":0},{"id":"FITEM_15","text":"變更部署時間Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":1725.14,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":450},"top":0,"type":"outflow","left":0},{"id":"FITEM_16","text":"變更佈署時間組合","config":{"error_pass":false,"top":1620,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":"#(FORMITM_16)","name":"change_deploy_start_date","require":false,"des":""},{"value":"#(FORMITM_17)","name":"change_deploy_end_date","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_deploy_start_date_t = \"部署開始時間：\"\nc_deploy_end_date_t = \"部署結束時間：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nFF = c_deploy_start_date_t + change_deploy_start_date + \"\\n\"\nGG = c_deploy_end_date_t + change_deploy_end_date + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nfinal = AA + BB + FF + GG + CC + DD + EE\nsummary_final = \"變更單：\" + change_summary + \"  已設定佈署時間\"","load_balance":false,"left":450},"top":0,"type":"python","left":0},{"id":"FITEM_17","text":"變更結案資訊組合","config":{"error_pass":false,"top":2505,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":"#(FORMITM_16)","name":"change_deploy_start_date","require":false,"des":""},{"value":"#(FORMITM_17)","name":"change_deploy_end_date","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""},{"value":null,"name":"nowtime","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_deploy_start_date_t = \"部署開始時間：\"\nc_deploy_end_date_t = \"部署結束時間：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nc_complete_time_t = \"完成日期：\"\nfrom omuser.models import OmUser,OmGroup\nfrom datetime import datetime as dt\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    else:\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\nnowtime = dt.strftime(dt.now(),'%Y-%m-%d %H:%M:%S')\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nFF = c_deploy_start_date_t + change_deploy_start_date + \"\\n\"\nGG = c_deploy_end_date_t + change_deploy_end_date + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nHH = c_complete_time_t + nowtime + \"\\n\"\nfinal = AA + BB + FF + GG + CC + DD + EE + HH\nsummary_final = \"變更單已經結案\"","load_balance":false,"left":450},"top":0,"type":"python","left":0},{"id":"FITEM_18","text":"變更開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":2743.89,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":450},"top":0,"type":"outflow","left":0},{"id":"FITEM_20","text":"完成時間欄位設定","config":{"top":2625,"output":[],"input":[{"value":"$(nowtime)","name":"#(FORMITM_15)","require":false,"des":""},{"value":"7","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[{"from":null,"to":null,"para2":null,"type":"--","para1":null}],"log":true,"left":450},"top":0,"type":"setform","left":0},{"id":"FLINE_MW56","config":{"linebox_top_width":20,"linebox_top":100,"source_item":"FITEM_1","source_side":"bottom","idcounter":56,"linebox_bottom_width":-20,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":110,"target_item":"FITEM_12","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW57","config":{"linebox_top_width":20,"linebox_top":200,"source_item":"FITEM_12","source_side":"bottom","idcounter":57,"linebox_bottom_width":-20,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":210,"target_item":"FITEM_13","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW59","config":{"linebox_top_width":-27.5,"linebox_top":307.5,"source_item":"FITEM_13","source_side":"bottom","idcounter":59,"linebox_bottom_width":27.5,"linebox_arrow_left":669.75,"linebox_long":13.75,"linebox_arrow_top":325,"target_item":"FITEM_2","target_side":"top","linebox_left":660},"type":"line"},{"id":"FITEM_21","text":"審核外部流程","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_6)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_8)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_14)","require":false,"des":""},{"value":null,"name":"#(FORMITM_15)","require":false,"des":""},{"value":null,"name":"#(FORMITM_16)","require":false,"des":""},{"value":null,"name":"#(FORMITM_17)","require":false,"des":""},{"value":"#(FORMITM_5)","name":"#(FORMITM_18)","require":false,"des":""},{"value":null,"name":"#G1(FORMITM_23)","require":false,"des":""},{"value":null,"name":"#G2(FORMITM_23)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_21)","require":false,"des":""},{"value":"#(FORMITM_12)","name":"#(FORMITM_22)","require":false,"des":""}],"top":532.5,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(approval_status)","name":"$(ap_status)","des":""},{"value":"$(approval_reason)","name":"$(ap_reason)","des":""},{"value":"$(approval_org)","name":"$(ap_org)","des":""},{"value":"$(approver)","name":"$(ap_man)","des":""}],"log":true,"flow_name":"核准流程","app_name":"內建流程","left":600},"top":0,"type":"outflow","left":0},{"id":"FITEM_22","text":"開發前審核狀態判斷","config":{"calculate":[],"top":430,"log":true,"rules":[{"value2":"1","rule":"=","target":"FITEM_21","value1":"#(FORMITM_11)"},{"value2":"0","rule":"=","target":"FITEM_2","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_42","value1":"#(FORMITM_11)"}],"left":600},"top":0,"type":"switch","left":0},{"id":"FLINE_MW62","config":{"linebox_top_width":27.5,"linebox_top":422.5,"source_item":"FITEM_2","source_side":"bottom","idcounter":62,"linebox_bottom_width":-27.5,"linebox_arrow_left":656,"linebox_long":13.75,"linebox_arrow_top":440,"target_item":"FITEM_22","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW63","config":{"linebox_top_width":21.25,"linebox_top":531.25,"source_item":"FITEM_22","source_side":"bottom","idcounter":63,"linebox_bottom_width":-21.25,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":542.5,"target_item":"FITEM_21","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MH64","config":{"linebox_top_width":100,"linebox_top":365,"source_item":"FITEM_22","source_side":"right","idcounter":64,"linebox_bottom_width":113.75,"linebox_arrow_left":733.75,"linebox_long":115,"linebox_arrow_top":361,"target_item":"FITEM_2","target_side":"right","linebox_left":833.75},"type":"line"},{"id":"FITEM_23","text":"審核狀態回報(成功)","config":{"top":730,"output":[{"value":"#(FORMITM_21)","name":"$(ap_PPP)","des":""}],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核通過 \\n","type":"replace","para1":"00"},{"from":"$(ap_man_str)","to":"$(ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"},{"from":"#(FORMITM_20)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(ap_result)"}],"log":true,"left":450},"top":0,"type":"setform","left":0},{"id":"FITEM_24","text":"審核狀態回傳判斷(1)","config":{"calculate":[],"top":640,"log":true,"rules":[{"value2":"00","rule":"=","target":"FITEM_23","value1":"$(ap_status)"},{"value2":"11","rule":"=","target":"FITEM_26","value1":"$(ap_status)"}],"left":600},"top":0,"type":"switch","left":0},{"id":"FLINE_MW67","config":{"linebox_top_width":23.75,"linebox_top":636.25,"source_item":"FITEM_21","source_side":"bottom","idcounter":67,"linebox_bottom_width":-23.75,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":650,"target_item":"FITEM_24","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW68","config":{"linebox_top_width":90,"linebox_top":690,"source_item":"FITEM_24","source_side":"left","idcounter":68,"linebox_bottom_width":60,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":740,"target_item":"FITEM_23","target_side":"top","linebox_left":510},"type":"line"},{"id":"FITEM_26","text":"審核狀態回報(失敗)","config":{"top":730,"output":[],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核否決 \\n","type":"replace","para1":"11"},{"from":"$(ap_man_str)","to":"$(ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"},{"from":"#(FORMITM_20)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(ap_result)"}],"log":true,"left":750},"top":0,"type":"setform","left":0},{"id":"FLINE_MW71","config":{"linebox_top_width":-90,"linebox_top":690,"source_item":"FITEM_24","source_side":"right","idcounter":71,"linebox_bottom_width":60,"linebox_arrow_left":806,"linebox_long":0,"linebox_arrow_top":740,"target_item":"FITEM_26","target_side":"top","linebox_left":810},"type":"line"},{"id":"FITEM_28","text":"上線前審核狀態判斷","config":{"calculate":[],"top":945,"log":true,"rules":[{"value2":"2","rule":"=","target":"FITEM_8","value1":"#(FORMITM_11)"},{"value2":"3","rule":"=","target":"FITEM_30","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_42","value1":"#(FORMITM_11)"}],"left":450},"top":0,"type":"switch","left":0},{"id":"FLINE_MW77","config":{"linebox_top_width":25,"linebox_top":835,"source_item":"FITEM_23","source_side":"bottom","idcounter":77,"linebox_bottom_width":-25,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":850,"target_item":"FITEM_8","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW79","config":{"linebox_top_width":22.5,"linebox_top":942.5,"source_item":"FITEM_8","source_side":"bottom","idcounter":79,"linebox_bottom_width":-22.5,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":955,"target_item":"FITEM_28","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MH80","config":{"linebox_top_width":100,"linebox_top":890,"source_item":"FITEM_28","source_side":"left","idcounter":80,"linebox_bottom_width":100,"linebox_arrow_left":440,"linebox_long":105,"linebox_arrow_top":886,"target_item":"FITEM_8","target_side":"left","linebox_left":350},"type":"line"},{"id":"FITEM_30","text":"審核外部流程","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_6)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_8)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_14)","require":false,"des":""},{"value":null,"name":"#(FORMITM_15)","require":false,"des":""},{"value":null,"name":"#(FORMITM_16)","require":false,"des":""},{"value":null,"name":"#(FORMITM_17)","require":false,"des":""},{"value":"#(FORMITM_5)","name":"#(FORMITM_18)","require":false,"des":""},{"value":null,"name":"#G1(FORMITM_23)","require":false,"des":""},{"value":null,"name":"#G2(FORMITM_23)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_21)","require":false,"des":""},{"value":null,"name":"#(FORMITM_22)","require":false,"des":""}],"top":1047.5,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(approval_status)","name":"$(ap_status)","des":""},{"value":"$(approval_reason)","name":"$(ap_reason)","des":""},{"value":"$(approval_org)","name":"$(ap_org)","des":""},{"value":"$(approver)","name":"$(ap_man)","des":""}],"log":true,"flow_name":"核准流程","app_name":"內建流程","left":450},"top":0,"type":"outflow","left":0},{"id":"FITEM_31","text":"審核狀態回傳判斷(3)","config":{"calculate":[],"top":1145,"log":true,"rules":[{"value2":"11","rule":"=","target":"FITEM_43","value1":"$(ap_status)"},{"value2":"00","rule":"=","target":"FITEM_44","value1":"$(ap_status)"}],"left":450},"top":0,"type":"switch","left":0},{"id":"FLINE_MW81","config":{"linebox_top_width":21.25,"linebox_top":1046.25,"source_item":"FITEM_28","source_side":"bottom","idcounter":81,"linebox_bottom_width":-21.25,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1057.5,"target_item":"FITEM_30","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW82","config":{"linebox_top_width":18.75,"linebox_top":1146.25,"source_item":"FITEM_30","source_side":"bottom","idcounter":82,"linebox_bottom_width":-18.75,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1155,"target_item":"FITEM_31","target_side":"top","linebox_left":510},"type":"line"},{"id":"FITEM_34","text":"排程階段到完成 人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":450,"input2":[],"action2_text":"","top":1380,"input":[{"value":"4","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":false,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"4","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW90","config":{"linebox_top_width":23.86500000000001,"linebox_top":1483.865,"source_item":"FITEM_34","source_side":"bottom","idcounter":90,"linebox_bottom_width":-23.86500000000001,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1497.73,"target_item":"FITEM_7","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MH91","config":{"linebox_top_width":100,"linebox_top":1430,"source_item":"FITEM_7","source_side":"left","idcounter":91,"linebox_bottom_width":100,"linebox_arrow_left":440,"linebox_long":107.73000000000002,"linebox_arrow_top":1426,"target_item":"FITEM_34","target_side":"left","linebox_left":350},"type":"line"},{"id":"FLINE_MW92","config":{"linebox_top_width":36.13499999999999,"linebox_top":1603.865,"source_item":"FITEM_7","source_side":"bottom","idcounter":92,"linebox_bottom_width":-36.13499999999999,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1630,"target_item":"FITEM_16","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW93","config":{"linebox_top_width":22.569999999999936,"linebox_top":1722.5700000000002,"source_item":"FITEM_16","source_side":"bottom","idcounter":93,"linebox_bottom_width":-22.570000000000164,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1735.14,"target_item":"FITEM_15","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW95","config":{"linebox_top_width":25.24499999999989,"linebox_top":1830.3850000000002,"source_item":"FITEM_15","source_side":"bottom","idcounter":95,"linebox_bottom_width":-25.24500000000012,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1845.63,"target_item":"FITEM_10","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW96","config":{"linebox_top_width":17.184999999999945,"linebox_top":1932.815,"source_item":"FITEM_10","source_side":"bottom","idcounter":96,"linebox_bottom_width":-17.184999999999945,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1940,"target_item":"FITEM_11","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MH97","config":{"linebox_top_width":100,"linebox_top":1885.63,"source_item":"FITEM_11","source_side":"left","idcounter":97,"linebox_bottom_width":100,"linebox_arrow_left":440,"linebox_long":94.36999999999989,"linebox_arrow_top":1881.63,"target_item":"FITEM_10","target_side":"left","linebox_left":350},"type":"line"},{"id":"FITEM_37","text":"審核狀態回傳判斷(6)","config":{"calculate":[],"top":2125,"log":true,"rules":[{"value2":"00","rule":"=","target":"FITEM_45","value1":"$(ap_status)"},{"value2":"11","rule":"=","target":"FITEM_46","value1":"$(ap_status)"}],"left":450},"top":0,"type":"switch","left":0},{"id":"FLINE_MW107","config":{"linebox_top_width":30,"linebox_top":2615,"source_item":"FITEM_17","source_side":"bottom","idcounter":107,"linebox_bottom_width":-30,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":2635,"target_item":"FITEM_20","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW108","config":{"linebox_top_width":29.445000000000164,"linebox_top":2734.4449999999997,"source_item":"FITEM_20","source_side":"bottom","idcounter":108,"linebox_bottom_width":-29.44499999999971,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":2753.89,"target_item":"FITEM_18","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW109","config":{"linebox_top_width":35.164999999999964,"linebox_top":2859.055,"source_item":"FITEM_18","source_side":"bottom","idcounter":109,"linebox_bottom_width":-35.164999999999964,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":2884.22,"target_item":"FITEM_4","target_side":"top","linebox_left":510},"type":"line"},{"id":"FITEM_41","text":"結案狀態設定","config":{"top":2400,"output":[],"input":[{"value":"7","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[{"from":null,"to":null,"para2":null,"type":"--","para1":null}],"log":true,"left":450},"top":0,"type":"setform","left":0},{"id":"FLINE_MW113","config":{"linebox_top_width":22.5,"linebox_top":2502.5,"source_item":"FITEM_41","source_side":"bottom","idcounter":113,"linebox_bottom_width":-22.5,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":2515,"target_item":"FITEM_17","target_side":"top","linebox_left":510},"type":"line"},{"id":"FITEM_42","text":"取消原因填寫","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":150,"input2":[],"action2_text":"","top":425,"input":[],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核人清單","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_19","config":{"idcounter":19,"readonly":true,"title":"審核時間資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":false,"title":"取消原因填寫","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH114","config":{"linebox_top_width":-165,"linebox_top":475,"source_item":"FITEM_22","source_side":"left","idcounter":114,"linebox_bottom_width":165,"linebox_arrow_left":270,"linebox_long":5,"linebox_arrow_top":471,"target_item":"FITEM_42","target_side":"right","linebox_left":435},"type":"line"},{"id":"FLINE_MH115","config":{"linebox_top_width":-80,"linebox_top":"475","source_item":"FITEM_28","source_side":"left","idcounter":115,"linebox_bottom_width":100,"linebox_arrow_left":270,"linebox_long":520,"linebox_arrow_top":471,"target_item":"FITEM_42","target_side":"right","linebox_left":"350"},"type":"line"},{"id":"FLINE_MH116","config":{"linebox_top_width":-80,"linebox_top":"475","source_item":"FITEM_7","source_side":"left","idcounter":116,"linebox_bottom_width":100,"linebox_arrow_left":270,"linebox_long":1062.73,"linebox_arrow_top":471,"target_item":"FITEM_42","target_side":"right","linebox_left":"350"},"type":"line"},{"id":"FITEM_43","text":"審核狀態回報(失敗)","config":{"top":1135,"output":[],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核否決 \\n","type":"replace","para1":"11"},{"from":"$(ap_man_str)","to":"$(ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"},{"from":"#(FORMITM_20)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(ap_result)"}],"log":true,"left":960},"top":0,"type":"setform","left":0},{"id":"FITEM_44","text":"審核狀態回報(成功)","config":{"top":1255,"output":[{"value":"#(FORMITM_21)","name":"$(ap_PPP)","des":""}],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核通過 \\n","type":"replace","para1":"00"},{"from":"$(ap_man_str)","to":"$(ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"},{"from":"#(FORMITM_20)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(ap_result)"}],"log":true,"left":450},"top":0,"type":"setform","left":0},{"id":"FLINE_MH118","config":{"linebox_top_width":195,"linebox_top":1185,"source_item":"FITEM_31","source_side":"right","idcounter":118,"linebox_bottom_width":-195,"linebox_arrow_left":950,"linebox_long":10,"linebox_arrow_top":1181,"target_item":"FITEM_43","target_side":"left","linebox_left":765},"type":"line"},{"id":"FLINE_MW120","config":{"linebox_top_width":25,"linebox_top":1250,"source_item":"FITEM_31","source_side":"bottom","idcounter":120,"linebox_bottom_width":-25,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1265,"target_item":"FITEM_44","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW121","config":{"linebox_top_width":32.5,"linebox_top":1367.5,"source_item":"FITEM_44","source_side":"bottom","idcounter":121,"linebox_bottom_width":-32.5,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1390,"target_item":"FITEM_34","target_side":"top","linebox_left":510},"type":"line"},{"id":"FITEM_45","text":"審核狀態回報(成功)","config":{"top":2230,"output":[{"value":"#(FORMITM_21)","name":"$(ap_PPP)","des":""}],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核通過 \\n","type":"replace","para1":"00"},{"from":"$(ap_man_str)","to":"$(ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"},{"from":"#(FORMITM_20)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(ap_result)"}],"log":true,"left":300},"top":0,"type":"setform","left":0},{"id":"FITEM_46","text":"審核狀態回報(失敗)","config":{"top":2220,"output":[],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核否決 \\n","type":"replace","para1":"11"},{"from":"$(ap_man_str)","to":"$(ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"},{"from":"#(FORMITM_20)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(ap_result)"}],"log":true,"left":600},"top":0,"type":"setform","left":0},{"id":"FLINE_MW122","config":{"linebox_top_width":90,"linebox_top":2175,"source_item":"FITEM_37","source_side":"left","idcounter":122,"linebox_bottom_width":75,"linebox_arrow_left":356,"linebox_long":0,"linebox_arrow_top":2240,"target_item":"FITEM_45","target_side":"top","linebox_left":360},"type":"line"},{"id":"FLINE_MW123","config":{"linebox_top_width":-55,"linebox_top":2365,"source_item":"FITEM_45","source_side":"bottom","idcounter":123,"linebox_bottom_width":55,"linebox_arrow_left":506,"linebox_long":150,"linebox_arrow_top":2410,"target_item":"FITEM_41","target_side":"top","linebox_left":360},"type":"line"},{"id":"FLINE_MW124","config":{"linebox_top_width":-90,"linebox_top":2175,"source_item":"FITEM_37","source_side":"right","idcounter":124,"linebox_bottom_width":65,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":2230,"target_item":"FITEM_46","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW125","config":{"linebox_top_width":60,"linebox_top":2360,"source_item":"FITEM_46","source_side":"bottom","idcounter":125,"linebox_bottom_width":-60,"linebox_arrow_left":506,"linebox_long":150,"linebox_arrow_top":2410,"target_item":"FITEM_41","target_side":"top","linebox_left":510},"type":"line"},{"id":"FITEM_47","text":"審核外部流程","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_6)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_8)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_14)","require":false,"des":""},{"value":null,"name":"#(FORMITM_15)","require":false,"des":""},{"value":null,"name":"#(FORMITM_16)","require":false,"des":""},{"value":null,"name":"#(FORMITM_17)","require":false,"des":""},{"value":"#(FORMITM_5)","name":"#(FORMITM_18)","require":false,"des":""},{"value":null,"name":"#G1(FORMITM_23)","require":false,"des":""},{"value":null,"name":"#G2(FORMITM_23)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_21)","require":false,"des":""},{"value":null,"name":"#(FORMITM_22)","require":false,"des":""}],"top":2027.5,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(approval_status)","name":"$(ap_status)","des":""},{"value":"$(approval_reason)","name":"$(ap_reason)","des":""},{"value":"$(approval_org)","name":"$(ap_org)","des":""},{"value":"$(approver)","name":"$(ap_man)","des":""}],"log":true,"flow_name":"核准流程","app_name":"內建流程","left":450},"top":0,"type":"outflow","left":0},{"id":"FLINE_MW126","config":{"linebox_top_width":18.75,"linebox_top":2028.75,"source_item":"FITEM_11","source_side":"bottom","idcounter":126,"linebox_bottom_width":-18.75,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":2037.5,"target_item":"FITEM_47","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW127","config":{"linebox_top_width":18.75,"linebox_top":2126.25,"source_item":"FITEM_47","source_side":"bottom","idcounter":127,"linebox_bottom_width":-18.75,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":2135,"target_item":"FITEM_37","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MH128","config":{"linebox_top_width":610,"linebox_top":890,"source_item":"FITEM_43","source_side":"right","idcounter":128,"linebox_bottom_width":100,"linebox_arrow_left":570,"linebox_long":295,"linebox_arrow_top":886,"target_item":"FITEM_8","target_side":"right","linebox_left":1180},"type":"line"},{"id":"FLINE_MH129","config":{"linebox_top_width":240,"linebox_top":2924.22,"source_item":"FITEM_42","source_side":"bottom","idcounter":129,"linebox_bottom_width":-2419.22,"linebox_arrow_left":440,"linebox_long":0,"linebox_arrow_top":2920.22,"target_item":"FITEM_4","target_side":"left","linebox_left":210},"type":"line"},{"id":"FLINE_MH130","config":{"linebox_top_width":236.25,"linebox_top":365,"source_item":"FITEM_26","source_side":"right","idcounter":130,"linebox_bottom_width":100,"linebox_arrow_left":733.75,"linebox_long":415,"linebox_arrow_top":361,"target_item":"FITEM_2","target_side":"right","linebox_left":970},"type":"line"}],"version":16777216,"subflow":[],"uid":1591066179131,"form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},{"name":"緊急變更","is_sub":false,"flow_line_counter":119,"flow_item_counter":42,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":600,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"變更分類與狀態","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":613.75,"input2":[],"action2_text":"","top":315,"form_setdata":[],"input":[{"value":"0","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案審核>>>結案","title":"緊急變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"2","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"2","text":"計畫階段"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":2617.97,"left":600,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_7","text":"完成狀態判斷","config":{"calculate":[],"top":962.715,"log":true,"rules":[{"value2":"4","rule":"=","target":"FITEM_34","value1":"#(FORMITM_11)"},{"value2":"5","rule":"=","target":"FITEM_16","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_42","value1":"#(FORMITM_11)"}],"left":600},"top":0,"type":"switch","left":0},{"id":"FITEM_8","text":"計畫階段到排程 人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":600,"input2":[],"action2_text":"","top":565,"input":[{"value":"2","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案審核>>>結案","title":"緊急變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"2","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"2","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"計畫階段"},{"value":"4","text":"已排程"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"2","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_10","text":"完成到結案審核 人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":600,"input2":[],"action2_text":"","top":1395.63,"input":[{"value":"5","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":false,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"5","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"5","text":"完成"},{"value":"6","text":"結案審核"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核人清單","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_19","config":{"idcounter":19,"readonly":true,"title":"審核時間資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_11","text":"結案判斷","config":{"calculate":[],"top":1555,"log":true,"rules":[{"value2":"5","rule":"=","target":"FITEM_10","value1":"#(FORMITM_11)"},{"value2":"6","rule":"=","target":"FITEM_36","value1":"#(FORMITM_11)"}],"left":600},"top":0,"type":"switch","left":0},{"id":"FITEM_12","text":"變更開單組合","config":{"error_pass":false,"top":100,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    ccc_name = \"\"\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nfinal = AA + BB + CC + DD + EE\nsummary_final = change_summary + \"   變更單已經指派給您\"","load_balance":false,"left":600},"top":0,"type":"python","left":0},{"id":"FITEM_13","text":"變更開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":200,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":600},"top":0,"type":"outflow","left":0},{"id":"FITEM_15","text":"變更部署時間Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":1275.14,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":600},"top":0,"type":"outflow","left":0},{"id":"FITEM_16","text":"變更佈署時間組合","config":{"error_pass":false,"top":1120,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":"#(FORMITM_16)","name":"change_deploy_start_date","require":false,"des":""},{"value":"#(FORMITM_17)","name":"change_deploy_end_date","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_deploy_start_date_t = \"部署開始時間：\"\nc_deploy_end_date_t = \"部署結束時間：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nFF = c_deploy_start_date_t + change_deploy_start_date + \"\\n\"\nGG = c_deploy_end_date_t + change_deploy_end_date + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nfinal = AA + BB + FF + GG + CC + DD + EE\nsummary_final = \"變更單：\" + change_summary + \"  已設定佈署時間\"","load_balance":false,"left":600},"top":0,"type":"python","left":0},{"id":"FITEM_17","text":"變更結案資訊組合","config":{"error_pass":false,"top":2205,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"change_group_id","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"change_person_id","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":"#(FORMITM_16)","name":"change_deploy_start_date","require":false,"des":""},{"value":"#(FORMITM_17)","name":"change_deploy_end_date","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""},{"value":null,"name":"nowtime","require":false,"des":""}],"calculate":[],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_deploy_start_date_t = \"部署開始時間：\"\nc_deploy_end_date_t = \"部署結束時間：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nc_complete_time_t = \"完成日期：\"\nfrom omuser.models import OmUser,OmGroup\nfrom datetime import datetime as dt\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    else:\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\ndef find_user_name(user_id=None):\n    username_ = OmUser.objects.get(id=user_id)\n    name = username_.username\n    return name\ndef find_groups_name(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    name = group_obj.name\n    return name\nif change_group_id != None and change_person_id == None :\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\n    ddd_name = \"\"\nelif (change_group_id == None and change_person_id == None) or (change_group_id == \"\" and change_person_id == \"\"):\n    ccc_name = \"\"\n    ddd_name = \"\"\nelse:\n    get_user = find_user_name(change_person_id)\n    ddd_name = (get_user)\n    get_group = find_groups_name(change_group_id)\n    ccc_name = (get_group)\nnowtime = dt.strftime(dt.now(),'%Y-%m-%d %H:%M:%S')\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nFF = c_deploy_start_date_t + change_deploy_start_date + \"\\n\"\nGG = c_deploy_end_date_t + change_deploy_end_date + \"\\n\"\nCC = c_group_t + ccc_name + \"\\n\"\nDD = c_person_t + ddd_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nHH = c_complete_time_t + nowtime + \"\\n\"\nfinal = AA + BB + FF + GG + CC + DD + EE + HH\nsummary_final = \"變更單已經結案\"","load_balance":false,"left":600},"top":0,"type":"python","left":0},{"id":"FITEM_18","text":"變更開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":2468.89,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(b)","name":null,"des":""},{"value":"$(d)","name":null,"des":""},{"value":"$(z)","name":null,"des":""},{"value":"$(x)","name":null,"des":""},{"value":"$(c)","name":null,"des":""},{"value":"$(nowtime)","name":null,"des":""},{"value":"$(e)","name":null,"des":""},{"value":"$(status)","name":null,"des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":600},"top":0,"type":"outflow","left":0},{"id":"FITEM_20","text":"完成時間欄位設定","config":{"top":2350,"output":[],"input":[{"value":"$(nowtime)","name":"#(FORMITM_15)","require":false,"des":""},{"value":"7","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[{"from":null,"to":null,"para2":null,"type":"--","para1":null}],"log":true,"left":600},"top":0,"type":"setform","left":0},{"id":"FLINE_MW56","config":{"linebox_top_width":20,"linebox_top":100,"source_item":"FITEM_1","source_side":"bottom","idcounter":56,"linebox_bottom_width":-20,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":110,"target_item":"FITEM_12","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW57","config":{"linebox_top_width":20,"linebox_top":200,"source_item":"FITEM_12","source_side":"bottom","idcounter":57,"linebox_bottom_width":-20,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":210,"target_item":"FITEM_13","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW59","config":{"linebox_top_width":-27.5,"linebox_top":307.5,"source_item":"FITEM_13","source_side":"bottom","idcounter":59,"linebox_bottom_width":27.5,"linebox_arrow_left":669.75,"linebox_long":13.75,"linebox_arrow_top":325,"target_item":"FITEM_2","target_side":"top","linebox_left":660},"type":"line"},{"id":"FITEM_22","text":"計畫階段狀態判斷","config":{"calculate":[],"top":430,"log":true,"rules":[{"value2":"0","rule":"=","target":"FITEM_2","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_42","value1":"#(FORMITM_11)"},{"value2":"2","rule":"=","target":"FITEM_8","value1":"#(FORMITM_11)"}],"left":600},"top":0,"type":"switch","left":0},{"id":"FLINE_MW62","config":{"linebox_top_width":27.5,"linebox_top":422.5,"source_item":"FITEM_2","source_side":"bottom","idcounter":62,"linebox_bottom_width":-27.5,"linebox_arrow_left":656,"linebox_long":13.75,"linebox_arrow_top":440,"target_item":"FITEM_22","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MH64","config":{"linebox_top_width":100,"linebox_top":365,"source_item":"FITEM_22","source_side":"right","idcounter":64,"linebox_bottom_width":113.75,"linebox_arrow_left":733.75,"linebox_long":115,"linebox_arrow_top":361,"target_item":"FITEM_2","target_side":"right","linebox_left":833.75},"type":"line"},{"id":"FITEM_28","text":"上線前審核狀態判斷","config":{"calculate":[],"top":720,"log":true,"rules":[{"value2":"2","rule":"=","target":"FITEM_8","value1":"#(FORMITM_11)"},{"value2":"8","rule":"=","target":"FITEM_42","value1":"#(FORMITM_11)"},{"value2":"4","rule":"=","target":"FITEM_34","value1":"#(FORMITM_11)"}],"left":600},"top":0,"type":"switch","left":0},{"id":"FLINE_MW79","config":{"linebox_top_width":47.5,"linebox_top":692.5,"source_item":"FITEM_8","source_side":"bottom","idcounter":79,"linebox_bottom_width":-47.5,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":730,"target_item":"FITEM_28","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MH80","config":{"linebox_top_width":165,"linebox_top":"615","source_item":"FITEM_28","source_side":"left","idcounter":80,"linebox_bottom_width":165,"linebox_arrow_left":590,"linebox_long":155,"linebox_arrow_top":611,"target_item":"FITEM_8","target_side":"left","linebox_left":"435"},"type":"line"},{"id":"FITEM_34","text":"排程階段到完成 人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":600,"input2":[],"action2_text":"","top":855,"input":[{"value":"4","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案審核>>>結案","title":"緊急變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"2","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"4","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW90","config":{"linebox_top_width":23.85749999999996,"linebox_top":958.8575000000001,"source_item":"FITEM_34","source_side":"bottom","idcounter":90,"linebox_bottom_width":-23.857500000000073,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":972.715,"target_item":"FITEM_7","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MH91","config":{"linebox_top_width":165,"linebox_top":"905","source_item":"FITEM_7","source_side":"left","idcounter":91,"linebox_bottom_width":165,"linebox_arrow_left":590,"linebox_long":107.71500000000003,"linebox_arrow_top":901,"target_item":"FITEM_34","target_side":"left","linebox_left":"435"},"type":"line"},{"id":"FLINE_MW92","config":{"linebox_top_width":48.64249999999993,"linebox_top":1091.3575,"source_item":"FITEM_7","source_side":"bottom","idcounter":92,"linebox_bottom_width":-48.64249999999993,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":1130,"target_item":"FITEM_16","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW93","config":{"linebox_top_width":47.569999999999936,"linebox_top":1247.5700000000002,"source_item":"FITEM_16","source_side":"bottom","idcounter":93,"linebox_bottom_width":-47.570000000000164,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":1285.14,"target_item":"FITEM_15","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW95","config":{"linebox_top_width":30.24499999999989,"linebox_top":1385.3850000000002,"source_item":"FITEM_15","source_side":"bottom","idcounter":95,"linebox_bottom_width":-30.24500000000012,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":1405.63,"target_item":"FITEM_10","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW96","config":{"linebox_top_width":49.684999999999945,"linebox_top":1525.315,"source_item":"FITEM_10","source_side":"bottom","idcounter":96,"linebox_bottom_width":-49.684999999999945,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":1565,"target_item":"FITEM_11","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MH97","config":{"linebox_top_width":100,"linebox_top":1445.63,"source_item":"FITEM_11","source_side":"left","idcounter":97,"linebox_bottom_width":100,"linebox_arrow_left":590,"linebox_long":159.3699999999999,"linebox_arrow_top":1441.63,"target_item":"FITEM_10","target_side":"left","linebox_left":500},"type":"line"},{"id":"FITEM_36","text":"審核外部流程","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_6)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_8)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_14)","require":false,"des":""},{"value":null,"name":"#(FORMITM_15)","require":false,"des":""},{"value":null,"name":"#(FORMITM_16)","require":false,"des":""},{"value":null,"name":"#(FORMITM_17)","require":false,"des":""},{"value":"#(FORMITM_26)","name":"#(FORMITM_18)","require":false,"des":""},{"value":null,"name":"#G1(FORMITM_23)","require":false,"des":""},{"value":null,"name":"#G2(FORMITM_23)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_21)","require":false,"des":""},{"value":"#(FORMITM_12)","name":"#(FORMITM_22)","require":false,"des":""}],"top":1697.5,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(approval_status)","name":"$(ap_status)","des":""},{"value":"$(approval_reason)","name":null,"des":""},{"value":"$(approval_org)","name":null,"des":""},{"value":"$(approver)","name":null,"des":""}],"log":true,"flow_name":"核准流程","app_name":"內建流程","left":600},"top":0,"type":"outflow","left":0},{"id":"FITEM_37","text":"審核狀態回傳判斷(6)","config":{"calculate":[],"top":1825,"log":true,"rules":[{"value2":"00","rule":"=","target":"FITEM_38","value1":"$(ap_status)"},{"value2":"11","rule":"=","target":"FITEM_39","value1":"$(ap_status)"}],"left":600},"top":0,"type":"switch","left":0},{"id":"FITEM_38","text":"審核狀態回報(成功)","config":{"top":1935,"output":[],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""},{"value":"$(final_ap_result)","name":"#(FORMITM_19)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核通過","type":"replace","para1":"00"},{"from":"$(ap_man_str)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"}],"log":true,"left":450},"top":0,"type":"setform","left":0},{"id":"FITEM_39","text":"審核狀態回報(失敗)","config":{"top":1947.5,"output":[],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""},{"value":"$(final_ap_result)","name":"#(FORMITM_19)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核否決","type":"replace","para1":"11"},{"from":"$(ap_man_str)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"}],"log":true,"left":720},"top":0,"type":"setform","left":0},{"id":"FLINE_MW98","config":{"linebox_top_width":41.25,"linebox_top":1676.25,"source_item":"FITEM_11","source_side":"bottom","idcounter":98,"linebox_bottom_width":-41.25,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":1707.5,"target_item":"FITEM_36","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW99","config":{"linebox_top_width":33.75,"linebox_top":1811.25,"source_item":"FITEM_36","source_side":"bottom","idcounter":99,"linebox_bottom_width":-33.75,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":1835,"target_item":"FITEM_37","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW100","config":{"linebox_top_width":90,"linebox_top":1875,"source_item":"FITEM_37","source_side":"left","idcounter":100,"linebox_bottom_width":80,"linebox_arrow_left":506,"linebox_long":0,"linebox_arrow_top":1945,"target_item":"FITEM_38","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW101","config":{"linebox_top_width":-60,"linebox_top":1875,"source_item":"FITEM_37","source_side":"right","idcounter":101,"linebox_bottom_width":92.5,"linebox_arrow_left":776,"linebox_long":0,"linebox_arrow_top":1957.5,"target_item":"FITEM_39","target_side":"top","linebox_left":780},"type":"line"},{"id":"FLINE_MW107","config":{"linebox_top_width":42.5,"linebox_top":2327.5,"source_item":"FITEM_17","source_side":"bottom","idcounter":107,"linebox_bottom_width":-42.5,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":2360,"target_item":"FITEM_20","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW108","config":{"linebox_top_width":29.445000000000164,"linebox_top":2459.4449999999997,"source_item":"FITEM_20","source_side":"bottom","idcounter":108,"linebox_bottom_width":-29.44499999999971,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":2478.89,"target_item":"FITEM_18","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW109","config":{"linebox_top_width":44.539999999999964,"linebox_top":2593.43,"source_item":"FITEM_18","source_side":"bottom","idcounter":109,"linebox_bottom_width":-44.539999999999964,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":2627.97,"target_item":"FITEM_4","target_side":"top","linebox_left":660},"type":"line"},{"id":"FITEM_41","text":"結案狀態設定","config":{"top":2075,"output":[],"input":[{"value":"7","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[{"from":null,"to":null,"para2":null,"type":"--","para1":null}],"log":true,"left":600},"top":0,"type":"setform","left":0},{"id":"FLINE_MW111","config":{"linebox_top_width":-40,"linebox_top":2055,"source_item":"FITEM_38","source_side":"bottom","idcounter":111,"linebox_bottom_width":40,"linebox_arrow_left":656,"linebox_long":150,"linebox_arrow_top":2085,"target_item":"FITEM_41","target_side":"top","linebox_left":510},"type":"line"},{"id":"FLINE_MW112","config":{"linebox_top_width":33.75,"linebox_top":2061.25,"source_item":"FITEM_39","source_side":"bottom","idcounter":112,"linebox_bottom_width":-33.75,"linebox_arrow_left":656,"linebox_long":120,"linebox_arrow_top":2085,"target_item":"FITEM_41","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW113","config":{"linebox_top_width":35,"linebox_top":2190,"source_item":"FITEM_41","source_side":"bottom","idcounter":113,"linebox_bottom_width":-35,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":2215,"target_item":"FITEM_17","target_side":"top","linebox_left":660},"type":"line"},{"id":"FITEM_42","text":"取消原因填寫","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":150,"input2":[],"action2_text":"","top":425,"input":[],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核人清單","require":false,"regex":"","rows":"4"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_19","config":{"idcounter":19,"readonly":true,"title":"審核時間資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":false,"title":"取消原因填寫","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH114","config":{"linebox_top_width":-165,"linebox_top":475,"source_item":"FITEM_22","source_side":"left","idcounter":114,"linebox_bottom_width":165,"linebox_arrow_left":270,"linebox_long":5,"linebox_arrow_top":471,"target_item":"FITEM_42","target_side":"right","linebox_left":435},"type":"line"},{"id":"FLINE_MH115","config":{"linebox_top_width":-165,"linebox_top":475,"source_item":"FITEM_28","source_side":"left","idcounter":115,"linebox_bottom_width":165,"linebox_arrow_left":270,"linebox_long":295,"linebox_arrow_top":471,"target_item":"FITEM_42","target_side":"right","linebox_left":435},"type":"line"},{"id":"FLINE_MH116","config":{"linebox_top_width":-165,"linebox_top":475,"source_item":"FITEM_7","source_side":"left","idcounter":116,"linebox_bottom_width":165,"linebox_arrow_left":270,"linebox_long":537.715,"linebox_arrow_top":471,"target_item":"FITEM_42","target_side":"right","linebox_left":435},"type":"line"},{"id":"FLINE_MH117","config":{"linebox_top_width":390,"linebox_top":2667.97,"source_item":"FITEM_42","source_side":"bottom","idcounter":117,"linebox_bottom_width":-2162.97,"linebox_arrow_left":590,"linebox_long":0,"linebox_arrow_top":2663.97,"target_item":"FITEM_4","target_side":"left","linebox_left":210},"type":"line"},{"id":"FLINE_MW118","config":{"linebox_top_width":37.5,"linebox_top":547.5,"source_item":"FITEM_22","source_side":"bottom","idcounter":118,"linebox_bottom_width":-37.5,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":575,"target_item":"FITEM_8","target_side":"top","linebox_left":660},"type":"line"},{"id":"FLINE_MW119","config":{"linebox_top_width":37.5,"linebox_top":837.5,"source_item":"FITEM_28","source_side":"bottom","idcounter":119,"linebox_bottom_width":-37.5,"linebox_arrow_left":656,"linebox_long":0,"linebox_arrow_top":865,"target_item":"FITEM_34","target_side":"top","linebox_left":660},"type":"line"}],"version":16777216,"subflow":[],"uid":1591066102754,"form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},{"name":"新建","is_sub":false,"flow_line_counter":12,"flow_item_counter":9,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":480,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"標準變更分類與狀態","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":240,"input2":[],"action2_text":"","top":425,"form_setdata":[],"input":[{"value":"0","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案","title":"標準變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"2","text":"計畫階段"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":30,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_3","text":"判斷","config":{"calculate":[],"top":300,"log":true,"rules":[{"value2":"0","rule":"=","target":"FITEM_2","value1":"#(FORMITM_6)"},{"value2":"1","rule":"=","target":"FITEM_7","value1":"#(FORMITM_6)"},{"value2":"2","rule":"=","target":"FITEM_8","value1":"#(FORMITM_6)"}],"left":480},"top":0,"type":"switch","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":652.5,"left":480,"output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(ap_count_first)","name":"$(ap_count_first)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_5","text":"變更開單組合","config":{"error_pass":false,"top":100,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"$(c_group_name)","name":"c_group_name","require":false,"des":""},{"value":"$(c_assignee_name)","name":"c_assignee_name","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""}],"calculate":[{"from":"#G1(FORMITM_7)","to":"$(c_group_name)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_7)","to":"$(c_assignee_name)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    else:\n        final_status = \"新建\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nCC = c_group_t + c_group_name + \"\\n\"\nDD = c_person_t + c_assignee_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nfinal = AA + BB + CC + DD + EE\nsummary_final = change_summary + \"   變更單已經指派給您\"","load_balance":false,"left":480},"top":0,"type":"python","left":0},{"id":"FLINE_MW4","config":{"linebox_top_width":20,"linebox_top":100,"source_item":"FITEM_1","source_side":"bottom","idcounter":4,"linebox_bottom_width":-20,"linebox_arrow_left":536,"linebox_long":0,"linebox_arrow_top":110,"target_item":"FITEM_5","target_side":"top","linebox_left":540},"type":"line"},{"id":"FITEM_6","text":"變更開單Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":200,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":480},"top":0,"type":"outflow","left":0},{"id":"FLINE_MW5","config":{"linebox_top_width":20,"linebox_top":200,"source_item":"FITEM_5","source_side":"bottom","idcounter":5,"linebox_bottom_width":-20,"linebox_arrow_left":536,"linebox_long":0,"linebox_arrow_top":210,"target_item":"FITEM_6","target_side":"top","linebox_left":540},"type":"line"},{"id":"FLINE_MW6","config":{"linebox_top_width":20,"linebox_top":300,"source_item":"FITEM_6","source_side":"bottom","idcounter":6,"linebox_bottom_width":-20,"linebox_arrow_left":536,"linebox_long":0,"linebox_arrow_top":310,"target_item":"FITEM_3","target_side":"top","linebox_left":540},"type":"line"},{"id":"FITEM_7","text":"一般變更分類與狀態","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[{"value":"#(FORMITM_35)","name":"$(ap_count_first)","des":""}],"action1":false,"log":true,"left":480,"input2":[],"action2_text":"","top":430,"input":[{"value":"新建","name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(ap_count_first)","name":"#(FORMITM_42)","require":false,"des":""}],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"1","text":"開發前審核"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":true,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":true},"hidden":false,"type":"list"}],"status":[],"group":[],"title":false,"form_item_counter":42,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW7","config":{"linebox_top_width":180,"linebox_top":350,"source_item":"FITEM_3","source_side":"left","idcounter":7,"linebox_bottom_width":95,"linebox_arrow_left":296,"linebox_long":0,"linebox_arrow_top":435,"target_item":"FITEM_2","target_side":"top","linebox_left":300},"type":"line"},{"id":"FLINE_MW8","config":{"linebox_top_width":35,"linebox_top":415,"source_item":"FITEM_3","source_side":"bottom","idcounter":8,"linebox_bottom_width":-35,"linebox_arrow_left":536,"linebox_long":0,"linebox_arrow_top":440,"target_item":"FITEM_7","target_side":"top","linebox_left":540},"type":"line"},{"id":"FITEM_8","text":"緊急變更分類與狀態","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":720,"input2":[],"action2_text":"","top":430,"input":[{"value":"0","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案審核>>>結案","title":"緊急變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"2","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"2","text":"計畫階段"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":31,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW9","config":{"linebox_top_width":-180,"linebox_top":350,"source_item":"FITEM_3","source_side":"right","idcounter":9,"linebox_bottom_width":100,"linebox_arrow_left":776,"linebox_long":0,"linebox_arrow_top":440,"target_item":"FITEM_8","target_side":"top","linebox_left":780},"type":"line"},{"id":"FLINE_MW10","config":{"linebox_top_width":-83.75,"linebox_top":588.75,"source_item":"FITEM_2","source_side":"bottom","idcounter":10,"linebox_bottom_width":83.75,"linebox_arrow_left":536,"linebox_long":240,"linebox_arrow_top":662.5,"target_item":"FITEM_4","target_side":"top","linebox_left":300},"type":"line"},{"id":"FLINE_MW11","config":{"linebox_top_width":81.25,"linebox_top":591.25,"source_item":"FITEM_7","source_side":"bottom","idcounter":11,"linebox_bottom_width":-81.25,"linebox_arrow_left":536,"linebox_long":0,"linebox_arrow_top":662.5,"target_item":"FITEM_4","target_side":"top","linebox_left":540},"type":"line"},{"id":"FLINE_MW12","config":{"linebox_top_width":81.25,"linebox_top":591.25,"source_item":"FITEM_8","source_side":"bottom","idcounter":12,"linebox_bottom_width":-81.25,"linebox_arrow_left":536,"linebox_long":240,"linebox_arrow_top":662.5,"target_item":"FITEM_4","target_side":"top","linebox_left":540},"type":"line"}],"version":16777216,"subflow":[],"uid":1591775681281,"form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":false,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_31","id":"FORMITM_42","config":{"value":"","idcounter":42,"readonly":false,"placeholder":"","title":"階層數隱藏","require":false,"regex":"","type":"text","rows":0},"hidden":true,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":42,"op2":[],"user":[],"level":[]}},{"name":"變更審核","is_sub":false,"flow_line_counter":64,"flow_item_counter":28,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":25,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""},{"value":null,"name":"ap_count_first","require":false,"des":""}],"output":[],"left":510,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_3","text":"狀態判斷","config":{"calculate":[{"from":"#(FORMITM_11)","to":"$(ap_success)","para2":"success","type":"replace","para1":"1"},{"from":"$(ap_success)","to":"$(ap_success)","para2":"success","type":"replace","para1":"3"},{"from":"$(ap_success)","to":"$(ap_success)","para2":"success","type":"replace","para1":"6"}],"top":325,"log":true,"rules":[{"value2":"success","rule":"!=","target":"FITEM_11","value1":"$(ap_success)"},{"value2":"success","rule":"=","target":"FITEM_5","value1":"$(ap_success)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":1498.95,"left":510,"output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(ap_status)","name":"$(ap_status)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_5","text":"審核外部流程","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_6)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_8)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_14)","require":false,"des":""},{"value":null,"name":"#(FORMITM_15)","require":false,"des":""},{"value":null,"name":"#(FORMITM_16)","require":false,"des":""},{"value":null,"name":"#(FORMITM_17)","require":false,"des":""},{"value":"#(FORMITM_5)","name":"#(FORMITM_18)","require":false,"des":""},{"value":null,"name":"#G1(FORMITM_23)","require":false,"des":""},{"value":null,"name":"#G2(FORMITM_23)","require":false,"des":""},{"value":"#(FORMITM_8)","name":"#(FORMITM_21)","require":false,"des":""},{"value":"#(FORMITM_12)","name":"#(FORMITM_22)","require":false,"des":""}],"top":510,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(approval_status)","name":"$(ap_status)","des":""},{"value":"$(approval_reason)","name":"$(ap_reason)","des":""},{"value":"$(approval_org)","name":"$(ap_org)","des":""},{"value":"$(approver)","name":"$(ap_man)","des":""}],"log":true,"flow_name":"核准流程","app_name":"內建流程","left":510},"top":0,"type":"outflow","left":0},{"id":"FITEM_6","text":"審核狀態回報(成功)","config":{"top":1030,"output":[{"value":"#(FORMITM_35)","name":"$(ap_count)","des":""}],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""},{"value":"$(approver_count)","name":"#(FORMITM_35)","require":false,"des":""}],"calculate":[{"from":"$(status_display)","to":"$(ap_status_result)","para2":null,"type":"add","para1":"-----"},{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核通過 \\n","type":"replace","para1":"00"},{"from":"$(ap_man_str)","to":"$(ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"},{"from":"$(ap_status_result)","to":"$(ap_status_sss)","para2":null,"type":"add","para1":"$(ap_result)"},{"from":"#(FORMITM_20)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(ap_status_sss)"},{"from":"#(FORMITM_35)","to":"$(approver_count)","para2":null,"type":"num-","para1":"1"}],"log":true,"left":390},"top":0,"type":"setform","left":0},{"id":"FITEM_7","text":"審核狀態判斷","config":{"calculate":[],"top":710,"log":true,"rules":[{"value2":"11","rule":"=","target":"FITEM_8","value1":"$(ap_status)"},{"value2":"00","rule":"=","target":"FITEM_21","value1":"$(ap_status)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW7","config":{"linebox_top_width":70,"linebox_top":660,"source_item":"FITEM_5","source_side":"bottom","idcounter":7,"linebox_bottom_width":-70,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":720,"target_item":"FITEM_7","target_side":"top","linebox_left":570},"type":"line"},{"id":"FITEM_8","text":"審核狀態回報(拒絕)","config":{"top":830,"output":[],"input":[{"value":"$(final_ap_result)","name":"#(FORMITM_20)","require":false,"des":""}],"calculate":[{"from":"#(FORMITM_21)","to":"$(ap_man_str)","para2":null,"type":"add","para1":"-----"},{"from":"$(ap_status)","to":"$(replace_ap_status)","para2":"審核拒絕 \\n","type":"replace","para1":"11"},{"from":"$(ap_man_str)","to":"$(ap_result)","para2":null,"type":"add","para1":"$(replace_ap_status)"},{"from":"#(FORMITM_20)","to":"$(final_ap_result)","para2":null,"type":"add","para1":"$(ap_result)"}],"log":true,"left":630},"top":0,"type":"setform","left":0},{"id":"FLINE_MW9","config":{"linebox_top_width":-60,"linebox_top":760,"source_item":"FITEM_7","source_side":"right","idcounter":9,"linebox_bottom_width":90,"linebox_arrow_left":686,"linebox_long":0,"linebox_arrow_top":840,"target_item":"FITEM_8","target_side":"top","linebox_left":690},"type":"line"},{"id":"FLINE_MH10","config":{"linebox_top_width":-60,"linebox_top":1548.95,"source_item":"FITEM_8","source_side":"bottom","idcounter":10,"linebox_bottom_width":-638.95,"linebox_arrow_left":630,"linebox_long":0,"linebox_arrow_top":1544.95,"target_item":"FITEM_4","target_side":"right","linebox_left":690},"type":"line"},{"id":"FITEM_11","text":"審核預設","config":{"error_pass":false,"top":315,"autoinstall":false,"output":[{"value":"$(ap_status)","name":"$(ap_status)","des":""}],"input":[{"value":"00","name":"ap_status","require":false,"des":""}],"calculate":[],"log":true,"code":"","load_balance":false,"left":270},"top":0,"type":"python","left":0},{"id":"FLINE_MH25","config":{"linebox_top_width":-60,"linebox_top":365,"source_item":"FITEM_3","source_side":"left","idcounter":25,"linebox_bottom_width":60,"linebox_arrow_left":390,"linebox_long":10,"linebox_arrow_top":361,"target_item":"FITEM_11","target_side":"right","linebox_left":450},"type":"line"},{"id":"FLINE_MH26","config":{"linebox_top_width":180,"linebox_top":1548.95,"source_item":"FITEM_11","source_side":"bottom","idcounter":26,"linebox_bottom_width":-1153.95,"linebox_arrow_left":500,"linebox_long":0,"linebox_arrow_top":1544.95,"target_item":"FITEM_4","target_side":"left","linebox_left":330},"type":"line"},{"id":"FLINE_MW34","config":{"linebox_top_width":62.5,"linebox_top":467.5,"source_item":"FITEM_3","source_side":"bottom","idcounter":34,"linebox_bottom_width":-62.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":520,"target_item":"FITEM_5","target_side":"top","linebox_left":570},"type":"line"},{"id":"FITEM_16","text":"判斷","config":{"calculate":[],"top":1180,"log":true,"rules":[{"value2":"0","rule":"!=","target":"FITEM_17","value1":"$(ap_count)"},{"value2":"0","rule":"=","target":"FITEM_22","value1":"$(ap_count)"}],"left":390},"top":0,"type":"switch","left":0},{"id":"FLINE_MW35","config":{"linebox_top_width":45,"linebox_top":1155,"source_item":"FITEM_6","source_side":"bottom","idcounter":35,"linebox_bottom_width":-45,"linebox_arrow_left":446,"linebox_long":0,"linebox_arrow_top":1190,"target_item":"FITEM_16","target_side":"top","linebox_left":450},"type":"line"},{"id":"FITEM_17","text":"指派審核","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":750,"input2":[],"action2_text":"","top":325,"input":[],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_11","config":{"value":"1","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"1","text":"開發前審核"},{"value":"3","text":"上線前審核"},{"value":"6","text":"結案審核"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":false,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":41,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MH39","config":{"linebox_top_width":-60,"linebox_top":375,"source_item":"FITEM_17","source_side":"left","idcounter":39,"linebox_bottom_width":60,"linebox_arrow_left":630,"linebox_long":0,"linebox_arrow_top":371,"target_item":"FITEM_3","target_side":"right","linebox_left":690},"type":"line"},{"id":"FLINE_MH40","config":{"linebox_top_width":100,"linebox_top":375,"source_item":"FITEM_16","source_side":"right","idcounter":40,"linebox_bottom_width":460,"linebox_arrow_left":870,"linebox_long":855,"linebox_arrow_top":371,"target_item":"FITEM_17","target_side":"right","linebox_left":970},"type":"line"},{"id":"FITEM_21","text":"審核數字改名稱","config":{"error_pass":false,"top":830,"autoinstall":false,"output":[{"value":"$(status_display)","name":"$(status_display)","des":""}],"input":[{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":null,"name":"status_display","require":false,"des":""}],"calculate":[],"log":true,"code":"def status_format(status_id=None):\n    if status_id == \"1\":\n        final_status = \"開發前審核\"\n    elif status_id == \"3\":\n        final_status = \"上線前審核\"\n    elif status_id == \"6\":\n        final_status = \"結案審核\"\n    else:\n        final_status = \"None\"\n    return final_status\nstatus_display = status_format(change_status_id)","load_balance":false,"left":390},"top":0,"type":"python","left":0},{"id":"FLINE_MW47","config":{"linebox_top_width":70,"linebox_top":980,"source_item":"FITEM_21","source_side":"bottom","idcounter":47,"linebox_bottom_width":-70,"linebox_arrow_left":446,"linebox_long":0,"linebox_arrow_top":1040,"target_item":"FITEM_6","target_side":"top","linebox_left":450},"type":"line"},{"id":"FLINE_MW48","config":{"linebox_top_width":60,"linebox_top":760,"source_item":"FITEM_7","source_side":"left","idcounter":48,"linebox_bottom_width":90,"linebox_arrow_left":446,"linebox_long":0,"linebox_arrow_top":840,"target_item":"FITEM_21","target_side":"top","linebox_left":450},"type":"line"},{"id":"FITEM_22","text":"階層審核數重置","config":{"top":1316,"output":[],"input":[{"value":"$(ap_count_first)","name":"#(FORMITM_35)","require":false,"des":""}],"calculate":[],"log":true,"left":390},"top":0,"type":"setform","left":0},{"id":"FLINE_MW49","config":{"linebox_top_width":38,"linebox_top":1298,"source_item":"FITEM_16","source_side":"bottom","idcounter":49,"linebox_bottom_width":-38,"linebox_arrow_left":446,"linebox_long":0,"linebox_arrow_top":1326,"target_item":"FITEM_22","target_side":"top","linebox_left":450},"type":"line"},{"id":"FLINE_MH50","config":{"linebox_top_width":60,"linebox_top":1548.95,"source_item":"FITEM_22","source_side":"bottom","idcounter":50,"linebox_bottom_width":-152.95000000000005,"linebox_arrow_left":500,"linebox_long":0,"linebox_arrow_top":1544.95,"target_item":"FITEM_4","target_side":"left","linebox_left":450},"type":"line"},{"id":"FITEM_28","text":"審核類別判斷","config":{"calculate":[],"top":175,"log":true,"rules":[{"value2":"2","rule":"<","target":"FITEM_3","value1":"#(FORMITM_41)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW63","config":{"linebox_top_width":45,"linebox_top":150,"source_item":"FITEM_1","source_side":"bottom","idcounter":63,"linebox_bottom_width":-45,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":185,"target_item":"FITEM_28","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW64","config":{"linebox_top_width":45,"linebox_top":300,"source_item":"FITEM_28","source_side":"bottom","idcounter":64,"linebox_bottom_width":-45,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":335,"target_item":"FITEM_3","target_side":"top","linebox_left":570},"type":"line"}],"version":16777216,"subflow":[],"uid":1591777027098,"form_object":{"op1":[],"form_box_counter":35,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":false,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_31","id":"FORMITM_43","config":{"value":"","idcounter":43,"readonly":true,"placeholder":"","title":"審核人清單","require":false,"regex":"","type":"text","rows":0},"hidden":true,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":43,"op2":[],"user":[],"level":[]}},{"name":"計畫階段","is_sub":false,"flow_line_counter":10,"flow_item_counter":7,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":25,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":540,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"標準變更計畫階段","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":330,"input2":[],"action2_text":"","top":250,"form_setdata":[],"flow_object":null,"calculate":[],"input":[{"value":"2","name":"#(FORMITM_11)","require":true,"des":""}],"cform_object":null,"subflow_id":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案","title":"標準變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"2","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"計畫階段"},{"value":"4","text":"已排程"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]},"action1_text":""},"top":0,"type":"form","left":0},{"id":"FITEM_3","text":"判斷","config":{"calculate":[],"top":125,"log":true,"rules":[{"value2":"0","rule":"=","target":"FITEM_2","value1":"#(FORMITM_6)"},{"value2":"1","rule":"=","target":"FITEM_5","value1":"#(FORMITM_6)"},{"value2":"2","rule":"=","target":"FITEM_7","value1":"#(FORMITM_6)"}],"left":540},"top":0,"type":"switch","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":470,"left":540,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FLINE_MW4","config":{"linebox_top_width":20,"linebox_top":125,"source_item":"FITEM_1","source_side":"bottom","idcounter":4,"linebox_bottom_width":-20,"linebox_arrow_left":596,"linebox_long":0,"linebox_arrow_top":135,"target_item":"FITEM_3","target_side":"top","linebox_left":600},"type":"line"},{"id":"FLINE_MW5","config":{"linebox_top_width":150,"linebox_top":175,"source_item":"FITEM_3","source_side":"left","idcounter":5,"linebox_bottom_width":95,"linebox_arrow_left":386,"linebox_long":0,"linebox_arrow_top":260,"target_item":"FITEM_2","target_side":"top","linebox_left":390},"type":"line"},{"id":"FLINE_MW6","config":{"linebox_top_width":-80,"linebox_top":410,"source_item":"FITEM_2","source_side":"bottom","idcounter":6,"linebox_bottom_width":80,"linebox_arrow_left":596,"linebox_long":210,"linebox_arrow_top":480,"target_item":"FITEM_4","target_side":"top","linebox_left":390},"type":"line"},{"id":"FITEM_5","text":"一般變更計畫階段","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":540,"input2":[],"action2_text":"","top":250,"input":[{"value":"2","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"2","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":true,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":true},"hidden":false,"type":"list"}],"status":[],"group":[],"title":false,"form_item_counter":41,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW7","config":{"linebox_top_width":32.5,"linebox_top":237.5,"source_item":"FITEM_3","source_side":"bottom","idcounter":7,"linebox_bottom_width":-32.5,"linebox_arrow_left":596,"linebox_long":0,"linebox_arrow_top":260,"target_item":"FITEM_5","target_side":"top","linebox_left":600},"type":"line"},{"id":"FLINE_MW8","config":{"linebox_top_width":80,"linebox_top":410,"source_item":"FITEM_5","source_side":"bottom","idcounter":8,"linebox_bottom_width":-80,"linebox_arrow_left":596,"linebox_long":0,"linebox_arrow_top":480,"target_item":"FITEM_4","target_side":"top","linebox_left":600},"type":"line"},{"id":"FITEM_7","text":"緊急變更計畫階段","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":750,"input2":[],"action2_text":"","top":250,"input":[{"value":"2","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案審核>>>結案","title":"緊急變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"2","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"2","text":"計畫階段"},{"value":"4","text":"已排程"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW9","config":{"linebox_top_width":-150,"linebox_top":175,"source_item":"FITEM_3","source_side":"right","idcounter":9,"linebox_bottom_width":95,"linebox_arrow_left":806,"linebox_long":0,"linebox_arrow_top":260,"target_item":"FITEM_7","target_side":"top","linebox_left":810},"type":"line"},{"id":"FLINE_MW10","config":{"linebox_top_width":80,"linebox_top":410,"source_item":"FITEM_7","source_side":"bottom","idcounter":10,"linebox_bottom_width":-80,"linebox_arrow_left":596,"linebox_long":210,"linebox_arrow_top":480,"target_item":"FITEM_4","target_side":"top","linebox_left":600},"type":"line"}],"version":16777216,"subflow":[],"uid":1591840172207,"form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":false,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":false},"hidden":false,"type":"list"}],"status":[],"group":[],"title":false,"form_item_counter":41,"op2":[],"user":[],"level":[]}},{"name":"已排程","is_sub":false,"flow_line_counter":10,"flow_item_counter":6,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":540,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"標準變更已排程","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":330,"input2":[],"action2_text":"","top":225,"form_setdata":[],"input":[{"value":"4","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案","title":"標準變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"4","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":42,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_3","text":"判斷","config":{"calculate":[],"top":125,"log":true,"rules":[{"value2":"0","rule":"=","target":"FITEM_2","value1":"#(FORMITM_6)"},{"value2":"1","rule":"=","target":"FITEM_5","value1":"#(FORMITM_6)"},{"value2":"2","rule":"=","target":"FITEM_6","value1":"#(FORMITM_6)"}],"left":540},"top":0,"type":"switch","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":400,"left":540,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FLINE_MW4","config":{"linebox_top_width":32.5,"linebox_top":112.5,"source_item":"FITEM_1","source_side":"bottom","idcounter":4,"linebox_bottom_width":-32.5,"linebox_arrow_left":596,"linebox_long":0,"linebox_arrow_top":135,"target_item":"FITEM_3","target_side":"top","linebox_left":600},"type":"line"},{"id":"FLINE_MW5","config":{"linebox_top_width":150,"linebox_top":175,"source_item":"FITEM_3","source_side":"left","idcounter":5,"linebox_bottom_width":70,"linebox_arrow_left":386,"linebox_long":0,"linebox_arrow_top":235,"target_item":"FITEM_2","target_side":"top","linebox_left":390},"type":"line"},{"id":"FLINE_MW6","config":{"linebox_top_width":-57.5,"linebox_top":362.5,"source_item":"FITEM_2","source_side":"bottom","idcounter":6,"linebox_bottom_width":57.5,"linebox_arrow_left":596,"linebox_long":210,"linebox_arrow_top":410,"target_item":"FITEM_4","target_side":"top","linebox_left":390},"type":"line"},{"id":"FITEM_5","text":"一般變更已排程","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":540,"input2":[],"action2_text":"","top":225,"input":[{"value":"4","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"4","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":true,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":true},"hidden":false,"type":"list"}],"status":[],"group":[],"title":false,"form_item_counter":42,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW7","config":{"linebox_top_width":20,"linebox_top":225,"source_item":"FITEM_3","source_side":"bottom","idcounter":7,"linebox_bottom_width":-20,"linebox_arrow_left":596,"linebox_long":0,"linebox_arrow_top":235,"target_item":"FITEM_5","target_side":"top","linebox_left":600},"type":"line"},{"id":"FLINE_MW8","config":{"linebox_top_width":57.5,"linebox_top":362.5,"source_item":"FITEM_5","source_side":"bottom","idcounter":8,"linebox_bottom_width":-57.5,"linebox_arrow_left":596,"linebox_long":0,"linebox_arrow_top":410,"target_item":"FITEM_4","target_side":"top","linebox_left":600},"type":"line"},{"id":"FITEM_6","text":"緊急變更已排程","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":750,"input2":[],"action2_text":"","top":225,"form_setdata":[],"input":[{"value":"4","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案審核>>>結案","title":"緊急變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"2","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"4","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW9","config":{"linebox_top_width":-150,"linebox_top":175,"source_item":"FITEM_3","source_side":"right","idcounter":9,"linebox_bottom_width":70,"linebox_arrow_left":806,"linebox_long":0,"linebox_arrow_top":235,"target_item":"FITEM_6","target_side":"top","linebox_left":810},"type":"line"},{"id":"FLINE_MW10","config":{"linebox_top_width":57.5,"linebox_top":362.5,"source_item":"FITEM_6","source_side":"bottom","idcounter":10,"linebox_bottom_width":-57.5,"linebox_arrow_left":596,"linebox_long":210,"linebox_arrow_top":410,"target_item":"FITEM_4","target_side":"top","linebox_left":600},"type":"line"}],"version":16777216,"subflow":[],"uid":1591845005124,"form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":false,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_31","id":"FORMITM_42","config":{"value":"","idcounter":42,"readonly":false,"placeholder":"","title":"階層數隱藏","require":false,"regex":"","type":"number","rows":0},"hidden":true,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":42,"op2":[],"user":[],"level":[]}},{"name":"完成","is_sub":false,"flow_line_counter":17,"flow_item_counter":9,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":510,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"標準變更完成","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":300,"input2":[],"action2_text":"","top":500,"form_setdata":[],"input":[{"value":"5","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案","title":"標準變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"5","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"5","text":"完成"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":632.5,"left":510,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_5","text":"一般變更完成","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":510,"input2":[],"action2_text":"","top":500,"input":[{"value":"5","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>開發前審核>>>計畫階段>>>上線前審核>>>已排程>>>完成>>>結案審核>>>結案","title":"一般變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"1","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"5","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":true,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":true},"hidden":false,"type":"list"}],"status":[],"group":[],"title":false,"form_item_counter":42,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_6","text":"緊急變更完成","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":720,"input2":[],"action2_text":"","top":500,"input":[{"value":"5","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"","form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：新建>>>計畫階段>>>已排程>>>完成>>>結案審核>>>結案","title":"緊急變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"2","idcounter":6,"readonly":true,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"5","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"開始部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"結束部署日期","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FITEM_7","text":"變更佈署時間組合","config":{"error_pass":false,"top":150,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"$(c_group)","name":"c_group","require":false,"des":""},{"value":"$(c_assignee)","name":"c_assignee","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":"#(FORMITM_16)","name":"change_deploy_start_date","require":false,"des":""},{"value":"#(FORMITM_17)","name":"change_deploy_end_date","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""}],"calculate":[{"from":"#G1(FORMITM_7)","to":"$(c_group)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_7)","to":"$(c_assignee)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_deploy_start_date_t = \"部署開始時間：\"\nc_deploy_end_date_t = \"部署結束時間：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nfrom omuser.models import OmUser,OmGroup\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nFF = c_deploy_start_date_t + change_deploy_start_date + \"\\n\"\nGG = c_deploy_end_date_t + change_deploy_end_date + \"\\n\"\nCC = c_group_t + c_group + \"\\n\"\nDD = c_person_t + c_assignee + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nfinal = AA + BB + FF + GG + CC + DD + EE\nsummary_final = \"變更單：\" + change_summary + \"  已設定佈署時間\"","load_balance":false,"left":510},"top":0,"type":"python","left":0},{"id":"FITEM_8","text":"外部流程","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":275,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":510},"top":0,"type":"outflow","left":0},{"id":"FLINE_MW7","config":{"linebox_top_width":32.5,"linebox_top":262.5,"source_item":"FITEM_7","source_side":"bottom","idcounter":7,"linebox_bottom_width":-32.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":285,"target_item":"FITEM_8","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW10","config":{"linebox_top_width":45,"linebox_top":125,"source_item":"FITEM_1","source_side":"bottom","idcounter":10,"linebox_bottom_width":-45,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":160,"target_item":"FITEM_7","target_side":"top","linebox_left":570},"type":"line"},{"id":"FITEM_9","text":"判斷","config":{"calculate":[],"top":375,"log":true,"rules":[{"value2":"0","rule":"=","target":"FITEM_2","value1":"#(FORMITM_6)"},{"value2":"1","rule":"=","target":"FITEM_5","value1":"#(FORMITM_6)"},{"value2":"2","rule":"=","target":"FITEM_6","value1":"#(FORMITM_6)"}],"left":510},"top":0,"type":"switch","left":0},{"id":"FLINE_MW11","config":{"linebox_top_width":20,"linebox_top":375,"source_item":"FITEM_8","source_side":"bottom","idcounter":11,"linebox_bottom_width":-20,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":385,"target_item":"FITEM_9","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW12","config":{"linebox_top_width":150,"linebox_top":425,"source_item":"FITEM_9","source_side":"left","idcounter":12,"linebox_bottom_width":95,"linebox_arrow_left":356,"linebox_long":0,"linebox_arrow_top":510,"target_item":"FITEM_2","target_side":"top","linebox_left":360},"type":"line"},{"id":"FLINE_MW13","config":{"linebox_top_width":32.5,"linebox_top":487.5,"source_item":"FITEM_9","source_side":"bottom","idcounter":13,"linebox_bottom_width":-32.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":510,"target_item":"FITEM_5","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW14","config":{"linebox_top_width":-150,"linebox_top":425,"source_item":"FITEM_9","source_side":"right","idcounter":14,"linebox_bottom_width":95,"linebox_arrow_left":776,"linebox_long":0,"linebox_arrow_top":510,"target_item":"FITEM_6","target_side":"top","linebox_left":780},"type":"line"},{"id":"FLINE_MH15","config":{"linebox_top_width":150,"linebox_top":682.5,"source_item":"FITEM_2","source_side":"bottom","idcounter":15,"linebox_bottom_width":-102.5,"linebox_arrow_left":500,"linebox_long":0,"linebox_arrow_top":678.5,"target_item":"FITEM_4","target_side":"left","linebox_left":360},"type":"line"},{"id":"FLINE_MW16","config":{"linebox_top_width":36.25,"linebox_top":616.25,"source_item":"FITEM_5","source_side":"bottom","idcounter":16,"linebox_bottom_width":-36.25,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":642.5,"target_item":"FITEM_4","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MH17","config":{"linebox_top_width":-150,"linebox_top":682.5,"source_item":"FITEM_6","source_side":"bottom","idcounter":17,"linebox_bottom_width":-102.5,"linebox_arrow_left":630,"linebox_long":0,"linebox_arrow_top":678.5,"target_item":"FITEM_4","target_side":"right","linebox_left":780},"type":"line"}],"version":16777216,"subflow":[],"uid":1591854325540,"form_object":{"op1":[],"form_box_counter":34,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":false,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_31","id":"FORMITM_42","config":{"value":"","idcounter":42,"readonly":false,"placeholder":"","title":"階層數隱藏","require":false,"regex":"","type":"number","rows":0},"hidden":true,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":42,"op2":[],"user":[],"level":[]}},{"name":"結案","is_sub":false,"flow_line_counter":8,"flow_item_counter":8,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":510,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":655,"left":510,"output":[{"value":"$(result)","name":"$(result)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_5","text":"結案狀態設定","config":{"top":125,"output":[],"input":[{"value":"7","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"log":true,"left":510},"top":0,"type":"setform","left":0},{"id":"FITEM_6","text":"變更結案資訊組合","config":{"error_pass":false,"top":249.969,"autoinstall":false,"output":[{"value":"$(final)","name":"$(final)","des":""},{"value":"$(summary_final)","name":"$(summary_final)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""}],"input":[{"value":"#(FORMITM_8)","name":"change_summary","require":false,"des":""},{"value":"#(FORMITM_5)","name":"change_content","require":false,"des":""},{"value":"$(c_group)","name":"c_group","require":false,"des":""},{"value":"$(c_name)","name":"c_name","require":false,"des":""},{"value":"#(FORMITM_11)","name":"change_status_id","require":false,"des":""},{"value":"#(FORMITM_16)","name":"change_deploy_start_date","require":false,"des":""},{"value":"#(FORMITM_17)","name":"change_deploy_end_date","require":false,"des":""},{"value":null,"name":"final","require":false,"des":""},{"value":null,"name":"summary_final","require":false,"des":""},{"value":null,"name":"nowtime","require":false,"des":""}],"calculate":[{"from":"#G1(FORMITM_7)","to":"$(c_group)","para2":null,"type":"get_group_name","para1":null},{"from":"#G2(FORMITM_7)","to":"$(c_name)","para2":null,"type":"get_user_name","para1":null}],"log":true,"code":"c_summary_t = \"變更主旨：\"\nc_content_t = \"變更內容：\"\nc_deploy_start_date_t = \"部署開始時間：\"\nc_deploy_end_date_t = \"部署結束時間：\"\nc_group_t = \"變更處理組：\"\nc_person_t = \"變更處理人員：\"\nc_status_t = \"狀態：\"\nc_complete_time_t = \"完成日期：\"\nfrom omuser.models import OmUser,OmGroup\nfrom datetime import datetime as dt\ndef status_format(status_id=None):\n    if status_id == \"0\":\n        final_status = \"新建\"\n    elif status_id == \"2\":\n        final_status = \"計畫階段\"\n    elif status_id == \"4\":\n        final_status = \"已排程\"\n    elif status_id == \"5\":\n        final_status = \"變更完成\"\n    elif status_id == \"7\":\n        final_status = \"結案\"\n    else:\n        final_status = \"結案\"\n    return final_status\nstatus_display = status_format(change_status_id)\n\nnowtime = dt.strftime(dt.now(),'%Y-%m-%d %H:%M:%S')\nAA = c_summary_t + change_summary + \"\\n\" \nBB = c_content_t + change_content + \"\\n\"\nFF = c_deploy_start_date_t + change_deploy_start_date + \"\\n\"\nGG = c_deploy_end_date_t + change_deploy_end_date + \"\\n\"\nCC = c_group_t + c_group + \"\\n\"\nDD = c_person_t + c_name + \"\\n\"\nEE = c_status_t + status_display + \"\\n\"\nHH = c_complete_time_t + nowtime + \"\\n\"\nfinal = AA + BB + FF + GG + CC + DD + EE + HH\nsummary_final = \"變更單已經結案\"","load_balance":false,"left":510},"top":0,"type":"python","left":0},{"id":"FITEM_7","text":"完成時間欄位設定","config":{"top":375,"output":[],"input":[{"value":"$(nowtime)","name":"#(FORMITM_15)","require":false,"des":""},{"value":"7","name":"#(FORMITM_11)","require":false,"des":""}],"calculate":[],"log":true,"left":510},"top":0,"type":"setform","left":0},{"id":"FITEM_8","text":"變更結案Mail","config":{"error_pass":false,"subflow_input":[{"value":"$(result)","name":"$(result)","require":false,"des":""},{"value":null,"name":"#(FORMITM_2)","require":false,"des":""},{"value":null,"name":"#(FORMITM_5)","require":false,"des":""},{"value":null,"name":"#(FORMITM_7)","require":false,"des":""},{"value":null,"name":"#(FORMITM_9)","require":false,"des":""},{"value":null,"name":"#(FORMITM_10)","require":false,"des":""},{"value":null,"name":"#(FORMITM_11)","require":false,"des":""},{"value":"$(summary_final)","name":"#(FORMITM_3)","require":false,"des":""},{"value":"$(final)","name":"#(FORMITM_8)","require":false,"des":""},{"value":"#G1(FORMITM_7)","name":"#G1(FORMITM_12)","require":false,"des":""},{"value":"#G2(FORMITM_7)","name":"#G2(FORMITM_12)","require":false,"des":""}],"top":499.992,"subflow_output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"log":true,"flow_name":"發送流程","app_name":"內建流程","left":510},"top":0,"type":"outflow","left":0},{"id":"FLINE_MW4","config":{"linebox_top_width":32.5,"linebox_top":112.5,"source_item":"FITEM_1","source_side":"bottom","idcounter":4,"linebox_bottom_width":-32.5,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":135,"target_item":"FITEM_5","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW5","config":{"linebox_top_width":32.4845,"linebox_top":237.4845,"source_item":"FITEM_5","source_side":"bottom","idcounter":5,"linebox_bottom_width":-32.4845,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":259.969,"target_item":"FITEM_6","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW6","config":{"linebox_top_width":32.515499999999975,"linebox_top":362.4845,"source_item":"FITEM_6","source_side":"bottom","idcounter":6,"linebox_bottom_width":-32.51550000000003,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":385,"target_item":"FITEM_7","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW7","config":{"linebox_top_width":32.49599999999998,"linebox_top":487.496,"source_item":"FITEM_7","source_side":"bottom","idcounter":7,"linebox_bottom_width":-32.49599999999998,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":509.992,"target_item":"FITEM_8","target_side":"top","linebox_left":570},"type":"line"},{"id":"FLINE_MW8","config":{"linebox_top_width":47.50400000000002,"linebox_top":627.496,"source_item":"FITEM_8","source_side":"bottom","idcounter":8,"linebox_bottom_width":-47.50400000000002,"linebox_arrow_left":566,"linebox_long":0,"linebox_arrow_top":665,"target_item":"FITEM_4","target_side":"top","linebox_left":570},"type":"line"}],"version":16777216,"subflow":[],"uid":1591857437069,"form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},{"name":"變更取消","is_sub":false,"flow_line_counter":4,"flow_item_counter":4,"description":"","items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":570,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"取消變更人工","config":{"subflow_input":[],"input1":[],"subflow_output":[],"action2":false,"output":[],"action1":false,"log":true,"left":570,"input2":[],"action2_text":"","top":125,"form_setdata":[],"input":[],"calculate":[],"action1_text":"","cform_object":null,"form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_11","config":{"value":"8","idcounter":11,"readonly":false,"title":"狀態","lists":[{"value":"0","text":"回到新建"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":false,"title":"取消原因填寫","require":true,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}},"top":0,"type":"form","left":0},{"id":"FLINE_MW1","config":{"linebox_top_width":32.5,"linebox_top":112.5,"source_item":"FITEM_1","source_side":"bottom","idcounter":1,"linebox_bottom_width":-32.5,"linebox_arrow_left":626,"linebox_long":0,"linebox_arrow_top":135,"target_item":"FITEM_2","target_side":"top","linebox_left":630},"type":"line"},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":250,"left":570,"output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"#(FORMITM_11)","name":"$(status)","des":""}]},"top":0,"type":"end","left":0},{"id":"FLINE_MW4","config":{"linebox_top_width":32.5,"linebox_top":237.5,"source_item":"FITEM_2","source_side":"bottom","idcounter":4,"linebox_bottom_width":-32.5,"linebox_arrow_left":626,"linebox_long":0,"linebox_arrow_top":260,"target_item":"FITEM_4","target_side":"top","linebox_left":630},"type":"line"}],"version":16777216,"subflow":[],"uid":1591866235185,"form_object":{"op1":[],"form_box_counter":32,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"}],"status":[],"group":[],"title":false,"form_item_counter":27,"op2":[],"user":[],"level":[]}}],"uid":1590976608395,"form_object":{"op1":[],"form_box_counter":35,"items":[{"parent":"public","id":"FORMBOX_26","config":{"color":"box box-success","title":"步驟流程","idcounter":26},"hidden":true,"type":"box12"},{"parent":"FORMBOX_26","id":"FORMITM_26","config":{"value":"","idcounter":26,"readonly":true,"placeholder":"狀態：","title":"變更流程資訊","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_27","config":{"color":"box box-danger","title":"變更單基本資訊","idcounter":27},"hidden":false,"type":"box12"},{"parent":"FORMBOX_27","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"變更申請人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_27","id":"FORMITM_6","config":{"value":"0","idcounter":6,"readonly":false,"title":"變更類別","lists":[{"value":"0","text":"標準變更"},{"value":"1","text":"一般變更"},{"value":"2","text":"緊急變更"},{"value":"3","text":"重大變更"}],"require":true},"hidden":false,"type":"list"},{"parent":"FORMBOX_27","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"變更主旨","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_27","id":"FORMITM_5","config":{"idcounter":5,"readonly":false,"title":"變更資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_28","config":{"color":"box box-info","title":"變更單詳細資訊","idcounter":28},"hidden":false,"type":"box12"},{"parent":"FORMBOX_28","id":"FORMBOX_3","config":{"color":"box","title":"","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"變更分類","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_11","config":{"value":"0","idcounter":11,"readonly":true,"title":"狀態","lists":[{"value":"0","text":"新建"},{"value":"1","text":"開發前審核"},{"value":"2","text":"計畫階段"},{"value":"3","text":"上線前審核"},{"value":"4","text":"已排程"},{"value":"5","text":"完成"},{"value":"6","text":"結案審核"},{"value":"7","text":"結案"},{"value":"8","text":"取消變更"}],"require":true},"hidden":false,"type":"h_status"},{"parent":"FORMBOX_3","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":true},"hidden":false,"type":"h_level"},{"parent":"FORMBOX_3","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"group_title":"變更處理組","lists":[],"require":true,"user_title":"變更處理人員","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_28","id":"FORMBOX_6","config":{"color":"box","title":"","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_6","id":"FORMITM_14","config":{"value":"","idcounter":14,"readonly":true,"placeholder":"","title":"建立日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":true,"placeholder":"","title":"開始部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":true,"placeholder":"","title":"結束部署日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":true,"placeholder":"","title":"完成日期","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_31","config":{"color":"box box-warning","title":"審核資訊","idcounter":31},"hidden":false,"type":"box12"},{"parent":"FORMBOX_31","id":"FORMITM_22","config":{"value":"","idcounter":22,"readonly":false,"placeholder":"","title":"審核角色or組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"審核人","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_32","config":{"color":"box box-danger","title":"取消資訊","idcounter":32},"hidden":false,"type":"box6"},{"parent":"FORMBOX_32","id":"FORMITM_27","config":{"idcounter":27,"readonly":true,"title":"取消原因填寫","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMITM_35","config":{"value":"1","idcounter":35,"readonly":false,"placeholder":"","title":"階層審核數","require":false,"regex":"","type":"number","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_20","config":{"idcounter":20,"readonly":true,"title":"審核詳細資訊","require":false,"regex":"","rows":"6"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_31","id":"FORMBOX_33","config":{"color":"box box-default","title":"開單資訊區塊","idcounter":33},"hidden":true,"type":"box6"},{"parent":"FORMBOX_31","id":"FORMBOX_34","config":{"color":"box box-default","title":"開單主管資訊","idcounter":34},"hidden":true,"type":"box6"},{"parent":"FORMBOX_33","id":"FORMITM_37","config":{"value":"","idcounter":37,"readonly":true,"placeholder":"","title":"開單人組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_33","id":"FORMITM_38","config":{"value":"","idcounter":38,"readonly":true,"placeholder":"","title":"開單人ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_39","config":{"value":"","idcounter":39,"readonly":true,"placeholder":"","title":"主管組織ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_34","id":"FORMITM_40","config":{"value":"","idcounter":40,"readonly":true,"placeholder":"","title":"主管ID","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_31","id":"FORMITM_41","config":{"value":"","idcounter":41,"readonly":false,"title":"審核類別","lists":[{"value":"0","text":"階層審核"},{"value":"1","text":"組織圖審核"}],"require":false},"hidden":false,"type":"list"},{"parent":"FORMBOX_31","id":"FORMITM_43","config":{"value":"","idcounter":43,"readonly":true,"placeholder":"","title":"審核人清單","require":false,"regex":"","type":"text","rows":0},"hidden":true,"type":"inputbox"}],"status":[],"group":[],"title":false,"form_item_counter":43,"op2":[],"user":[],"level":[]}}}],"app_attr":"sys","app_name":"服務管理"},{"flow_list":[{"config":{"name":"發送流程","display_field":0,"status_field":0,"mission":false,"search_field":0,"worklog":true,"title_field":0,"log":true,"relation":true,"flowlog":true,"fp_show":true,"permission":[],"attachment":false,"api":false,"history":true,"subflow":[],"description":""},"flow_app_id__app_name":"內建流程","flow_name":"發送流程","description":"","flowobject":{"is_sub":false,"flow_line_counter":20,"flow_item_counter":14,"items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":210,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":350.781,"left":209.984,"output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(status)","name":"$(status)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_5","text":"執行","config":{"error_pass":true,"top":109.969,"autoinstall":false,"output":[{"value":"$(to_email_name)","name":"$(to_name)","des":""},{"value":"$(email_subject)","name":"$(subject)","des":""},{"value":"$(email_content)","name":"$(content)","des":""},{"value":"$(nowtime)","name":"$(nowtime)","des":""},{"value":"$(e)","name":"$(result)","des":""},{"value":"$(status)","name":"$(status)","des":""}],"input":[{"value":"$(smtp_server)","name":"email_server","require":false,"des":""},{"value":"$(smtp_port)","name":"email_port","require":false,"des":""},{"value":"$(smtp_mail_from)","name":"send_user","require":false,"des":""},{"value":"$(smtp_user_password)","name":"send_password","require":false,"des":""},{"value":"$(smtp_mail_from)","name":"mail_from","require":false,"des":""},{"value":null,"name":"NUMA","require":false,"des":""},{"value":null,"name":"NUMB","require":false,"des":""},{"value":"#(FORMITM_2)","name":"to_email_name","require":false,"des":""},{"value":"#(FORMITM_9)","name":"cc_user","require":false,"des":""},{"value":"#(FORMITM_11)","name":"Bcc_user","require":false,"des":""},{"value":"#(FORMITM_3)","name":"email_subject","require":false,"des":""},{"value":"#(FORMITM_8)","name":"email_content","require":false,"des":""},{"value":null,"name":"nowtime","require":false,"des":""},{"value":null,"name":"e","require":false,"des":""},{"value":null,"name":"status","require":false,"des":""},{"value":null,"name":"all_content","require":false,"des":""},{"value":"#G1(FORMITM_12)","name":"org_id","require":false,"des":""},{"value":"#G2(FORMITM_12)","name":"person_id","require":false,"des":""}],"calculate":[{"from":null,"to":"$(smtp_server)","para2":null,"type":"sys_parameter","para1":"smtp_server"},{"from":null,"to":"$(smtp_port)","para2":null,"type":"sys_parameter","para1":"smtp_port"},{"from":null,"to":"$(smtp_mail_from)","para2":null,"type":"sys_parameter","para1":"smtp_mail_from"},{"from":null,"to":"$(smtp_user)","para2":null,"type":"sys_parameter","para1":"smtp_user"},{"from":null,"to":"$(smtp_user_password)","para2":null,"type":"sys_parameter","para1":"smtp_user_password"}],"log":true,"code":"from email.mime.text import MIMEText\nimport smtplib\nfrom datetime import datetime as dt\nfrom omuser.models import OmUser,OmGroup\n\nfoot_content = \"\\n ***系統自動發送，請不要直接回覆***\"\nall_content = email_content + foot_content\n\ndef find_user_mail(user_id=None):\n    user_email = OmUser.objects.get(id=user_id)\n    email = user_email.email\n    return email\ndef find_groups_mail(group_id=None):\n    group_obj = OmGroup.objects.get(id=group_id)\n    group_user_list = list(group_obj.user_set.all().values_list('username',flat=True))\n    user_email_list = list(OmUser.objects.filter(username__in=group_user_list).values_list((\"email\"),flat=True))\n    email_str = \";\".join(user_email_list)\n    return email_str\nif org_id != None and person_id == None :\n    get_group_id = find_groups_mail(org_id)\n    a = (get_group_id)\nelif (org_id == None and person_id == None) or (org_id == \"\" and person_id == \"\"):\n    a = \"\"\nelse:\n    get_user_id = find_user_mail(person_id)\n    a = (get_user_id)\ntry:\n    # Create message\n    message = MIMEText(all_content, 'plain', 'utf-8')\n    message['Subject'] = email_subject\n    message['From'] = mail_from\n    message['To'] = to_email_name + \";\" +a\n    message['Cc'] = cc_user\n    message['Bcc'] = Bcc_user\n    if str(email_port) == \"587\":\n        # Set smtp\n        smtp = smtplib.SMTP(email_server,email_port)\n        #smtp.set_debuglevel(1)\n        smtp.ehlo()\n        smtp.starttls()\n        smtp.login(send_user, send_password)\n    elif str(email_port) == \"465\":\n        smtp = smtplib.SMTP_SSL(email_server, email_port)\n        #smtp.set_debuglevel(1)\n        smtp.ehlo()\n        smtp.login(send_user, send_password)\n    else:\n        smtp = smtplib.SMTP(email_server, email_port)\n        #smtp.set_debuglevel(1)\n        smtp.ehlo()\n    nowtime = dt.strftime(dt.now(),'%Y-%m-%d %H:%M:%S')\n    # Send msil\n    #smtp.sendmail(message['From'], message['To'].split(';')+message['Cc'].split(';')+message['Bcc'].split(';'),message.as_string())\n    smtp.send_message(message)\n    smtp.quit()\n    status = \"成功\"\n    NUMA = 'Send mails OK!'\n    e = 'Send mails OK!'\nexcept Exception as err:\n    status = \"失敗\"\n    e = str(err)","load_balance":false,"left":209.969},"top":0,"type":"python","left":0},{"id":"FITEM_9","text":"資料設定","config":{"top":225,"output":[{"value":"#(FORMITM_5)","name":"$(nowtime)","des":""},{"value":"#(FORMITM_10)","name":"$(e)","des":""},{"value":"#(FORMITM_7)","name":"$(status)","des":""}],"input":[{"value":"$(result)","name":"#(FORMITM_10)","require":false,"des":""},{"value":"$(nowtime)","name":"#(FORMITM_5)","require":false,"des":""},{"value":"$(status)","name":"#(FORMITM_7)","require":false,"des":""},{"value":"$(content)","name":"#(FORMITM_8)","require":false,"des":""}],"calculate":[],"log":true,"left":209.984},"top":0,"type":"setform","left":0},{"id":"FLINE_MW12","config":{"linebox_top_width":-27.515500000000003,"linebox_top":217.4845,"source_item":"FITEM_5","source_side":"bottom","idcounter":12,"linebox_bottom_width":27.515500000000003,"linebox_arrow_left":265.98400000000004,"linebox_long":0.015000000000043201,"linebox_arrow_top":235,"target_item":"FITEM_9","target_side":"top","linebox_left":269.969},"type":"line"},{"id":"FLINE_MW13","config":{"linebox_top_width":32.89050000000003,"linebox_top":337.8905,"source_item":"FITEM_9","source_side":"bottom","idcounter":13,"linebox_bottom_width":-32.890499999999975,"linebox_arrow_left":265.98400000000004,"linebox_long":0,"linebox_arrow_top":360.781,"target_item":"FITEM_4","target_side":"top","linebox_left":269.98400000000004},"type":"line"},{"id":"FLINE_MW20","config":{"linebox_top_width":24.984499999999997,"linebox_top":104.9845,"source_item":"FITEM_1","source_side":"bottom","idcounter":20,"linebox_bottom_width":-24.984499999999997,"linebox_arrow_left":265.969,"linebox_long":0.03100000000000591,"linebox_arrow_top":119.969,"target_item":"FITEM_5","target_side":"top","linebox_left":269.969},"type":"line"}],"version":16777216,"subflow":[],"uid":1588644608616,"form_object":{"op1":[],"form_box_counter":6,"items":[{"parent":"public","id":"FORMBOX_5","config":{"color":"box box-success","title":"通知紀錄","idcounter":5},"hidden":false,"type":"box6"},{"parent":"public","id":"FORMBOX_6","config":{"color":"box box-default","title":"紀錄分頁","idcounter":6},"hidden":false,"type":"box6"},{"parent":"FORMBOX_5","id":"FORMITM_2","config":{"value":"","idcounter":2,"readonly":false,"placeholder":"","title":"收件者","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_5","config":{"value":"","idcounter":5,"readonly":false,"placeholder":"","title":"發送時間","require":false,"regex":"","type":"text","rows":0},"hidden":true,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"placeholder":"","title":"發送狀態","require":false,"regex":"","type":"text","rows":0},"hidden":true,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":false,"placeholder":"","title":"副本","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_10","config":{"idcounter":10,"readonly":false,"title":"結果回傳","require":false,"regex":"","rows":"5"},"hidden":true,"type":"areabox"},{"parent":"FORMBOX_5","id":"FORMITM_11","config":{"value":"","idcounter":11,"readonly":false,"placeholder":"","title":"密件","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_3","config":{"value":"","idcounter":3,"readonly":false,"placeholder":"","title":"主旨","require":true,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_5","id":"FORMITM_8","config":{"idcounter":8,"readonly":false,"title":"內文","require":true,"regex":"","rows":"8"},"hidden":false,"type":"areabox"},{"parent":"FORMBOX_6","id":"FORMITM_12","config":{"value":"","idcounter":12,"readonly":false,"group_title":"組織","lists":[],"require":false,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"}],"status":[],"group":[],"title":false,"form_item_counter":13,"op2":[],"user":[],"level":[]}}},{"config":{"name":"核准流程","display_field":0,"status_field":0,"mission":true,"search_field":0,"worklog":true,"subflow":[],"log":false,"description":"","relation":true,"flowlog":true,"permission":[],"attachment":true,"api":true,"history":true,"title_field":0,"fp_show":true},"flow_app_id__app_name":"內建流程","flow_name":"核准流程","description":"","flowobject":{"is_sub":false,"flow_line_counter":35,"flow_item_counter":11,"items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":"success","name":"result","require":false,"des":""}],"output":[],"left":420,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_2","text":"審核人工輸入","config":{"subflow_input":[],"input1":[{"value":"00","name":"#(FORMITM_14)","require":false,"des":""}],"subflow_output":[],"action2":true,"output":[],"action1":true,"log":true,"left":420,"input2":[{"value":"11","name":"#(FORMITM_14)","require":false,"des":""}],"action2_text":"否決","top":200,"form_setdata":[],"input":[],"calculate":[],"subflow_id":"","cform_object":null,"action1_text":"核准","form_object":null},"top":0,"type":"form","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":456.833,"left":420,"output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"#(FORMITM_14)","name":"$(approval_status)","des":""},{"value":"#(FORMITM_21)","name":"$(approval_reason)","des":""},{"value":"#G1(FORMITM_23)","name":"$(approval_org)","des":""},{"value":"#G2(FORMITM_23)","name":"$(approver)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_10","text":"狀態預設","config":{"top":100,"output":[],"input":[{"value":"22","name":"#(FORMITM_14)","require":false,"des":""}],"calculate":[],"log":true,"left":420},"top":0,"type":"setform","left":0},{"id":"FLINE_MW15","config":{"linebox_top_width":20,"linebox_top":200,"source_item":"FITEM_10","source_side":"bottom","idcounter":15,"linebox_bottom_width":-20,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":210,"target_item":"FITEM_2","target_side":"top","linebox_left":480},"type":"line"},{"id":"FITEM_11","text":"判斷","config":{"calculate":[],"top":325,"log":true,"rules":[{"value2":"22","rule":"!=","target":"FITEM_4","value1":"#(FORMITM_14)"},{"value2":"22","rule":"=","target":"FITEM_10","value1":"#(FORMITM_14)"}],"left":420},"top":0,"type":"switch","left":0},{"id":"FLINE_MW16","config":{"linebox_top_width":32.5,"linebox_top":312.5,"source_item":"FITEM_2","source_side":"bottom","idcounter":16,"linebox_bottom_width":-32.5,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":335,"target_item":"FITEM_11","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MW17","config":{"linebox_top_width":35.916499999999985,"linebox_top":440.91650000000004,"source_item":"FITEM_11","source_side":"bottom","idcounter":17,"linebox_bottom_width":-35.91650000000004,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":466.833,"target_item":"FITEM_4","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MW21","config":{"linebox_top_width":20,"linebox_top":100,"source_item":"FITEM_1","source_side":"bottom","idcounter":21,"linebox_bottom_width":-20,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":110,"target_item":"FITEM_10","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MH35","config":{"linebox_top_width":100,"linebox_top":150,"source_item":"FITEM_11","source_side":"right","idcounter":35,"linebox_bottom_width":100,"linebox_arrow_left":540,"linebox_long":225,"linebox_arrow_top":146,"target_item":"FITEM_10","target_side":"right","linebox_left":640},"type":"line"}],"version":16777216,"subflow":[],"uid":1588901536104,"form_object":{"op1":[],"form_box_counter":9,"items":[{"parent":"public","id":"FORMBOX_2","config":{"color":"box box-success","title":"請求人員","idcounter":2},"hidden":false,"type":"box6"},{"parent":"public","id":"FORMBOX_3","config":{"color":"box box-info","title":"請求內容","idcounter":3},"hidden":false,"type":"box6"},{"parent":"FORMBOX_2","id":"FORMITM_6","config":{"value":"","idcounter":6,"readonly":false,"placeholder":"","title":"人員名稱","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_2","id":"FORMITM_7","config":{"value":"","idcounter":7,"readonly":false,"placeholder":"","title":"人員編號","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_2","id":"FORMITM_8","config":{"value":"","idcounter":8,"readonly":false,"placeholder":"","title":"所屬組織","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_9","config":{"value":"","idcounter":9,"readonly":false,"placeholder":"","title":"審批類型","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_10","config":{"value":"","idcounter":10,"readonly":false,"placeholder":"","title":"審批主旨","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_3","id":"FORMITM_14","config":{"value":"22","idcounter":14,"readonly":false,"title":"狀態","lists":[{"value":"00","text":"審核通過"},{"value":"11","text":"審核否決"},{"value":"22","text":"等待審核"}],"require":false},"hidden":false,"type":"h_status"},{"parent":"public","id":"FORMBOX_6","config":{"color":"box box-warning","title":"審批表單資訊","idcounter":6},"hidden":false,"type":"box12"},{"parent":"FORMBOX_6","id":"FORMITM_15","config":{"value":"","idcounter":15,"readonly":false,"placeholder":"","title":"應用名稱","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_16","config":{"value":"","idcounter":16,"readonly":false,"placeholder":"","title":"流程名稱","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"FORMBOX_6","id":"FORMITM_17","config":{"value":"","idcounter":17,"readonly":false,"placeholder":"","title":"請求單號","require":false,"regex":"","type":"text","rows":0},"hidden":false,"type":"inputbox"},{"parent":"public","id":"FORMBOX_7","config":{"color":"box box-danger","title":"審批詳細內容","idcounter":7},"hidden":false,"type":"box12"},{"parent":"FORMBOX_7","id":"FORMITM_18","config":{"idcounter":18,"readonly":false,"title":"詳細資訊","require":false,"regex":"","rows":"3"},"hidden":false,"type":"areabox"},{"parent":"public","id":"FORMBOX_8","config":{"color":"box box-primary","title":"審核人員","idcounter":8},"hidden":false,"type":"box12"},{"parent":"FORMBOX_8","id":"FORMITM_23","config":{"value":"","idcounter":23,"readonly":false,"group_title":"組織","lists":[],"require":false,"user_title":"受派人","user_require":false,"user":true},"hidden":false,"type":"h_group"},{"parent":"FORMBOX_8","id":"FORMITM_21","config":{"value":"","idcounter":21,"readonly":false,"placeholder":"","title":"標題","require":false,"regex":"","type":"inputbox"},"hidden":false,"type":"h_title"},{"parent":"FORMBOX_8","id":"FORMITM_22","config":{"value":"red","idcounter":22,"readonly":false,"title":"燈號","lists":[{"value":"green","text":"綠燈"},{"value":"yellow","text":"黃燈"},{"value":"red","text":"紅燈"}],"require":false},"hidden":false,"type":"h_level"}],"status":[],"group":[],"title":false,"form_item_counter":25,"op2":[],"user":[],"level":[]}}},{"config":{"name":"收件流程","display_field":0,"status_field":0,"mission":true,"search_field":0,"worklog":false,"title_field":0,"log":true,"relation":false,"flowlog":true,"fp_show":true,"permission":[],"attachment":false,"api":true,"history":true,"subflow":[],"description":""},"flow_app_id__app_name":"內建流程","flow_name":"收件流程","description":"","flowobject":{"is_sub":false,"flow_line_counter":8,"flow_item_counter":6,"items":[{"id":"FITEM_1","text":"開始","config":{"error_pass":false,"subflow_input":[],"top":0,"subflow_output":[],"callable":false,"input":[{"value":null,"name":"result","require":false,"des":""}],"output":[],"left":420,"load_balance":false,"subflow_id":""},"top":0,"type":"start","left":0},{"id":"FITEM_4","text":"結束","config":{"calculate":[],"top":250,"left":420,"output":[{"value":"$(result)","name":"$(result)","des":""},{"value":"$(result_status)","name":"$(result_status)","des":""}]},"top":0,"type":"end","left":0},{"id":"FITEM_5","text":"收信","config":{"error_pass":false,"top":125,"autoinstall":false,"output":[{"name":"$(result_status)","value":"$(result_status)","des":""}],"input":[{"name":"smtp_user","value":"$(smtp_user)","require":false,"des":""},{"name":"passwd","value":"$(smtp_user_password)","require":false,"des":""},{"name":"host","value":"$(imap_server)","require":false,"des":""},{"name":"receive_keyword","value":"$(imap_receive_keyword)","require":false,"des":""},{"name":"result_status","value":"$(result)","require":false,"des":""}],"calculate":[{"from":null,"to":"$(smtp_user)","para2":null,"type":"sys_parameter","para1":"smtp_user"},{"from":null,"to":"$(smtp_user_password)","para2":null,"type":"sys_parameter","para1":"smtp_user_password"},{"from":null,"to":"$(imap_server)","para2":null,"type":"sys_parameter","para1":"imap_server"},{"from":null,"to":"$(imap_receive_keyword)","para2":null,"type":"sys_parameter","para1":"imap_receive_keyword"}],"log":true,"code":"# -*- coding: utf-8 -*-\nimport imaplib\nimport email,json\nfrom email.parser import BytesParser\nfrom email.utils import parseaddr \nfrom django.core.files.base import ContentFile\nfrom django.core.files.uploadedfile import UploadedFile\nmail_directory = 'INBOX' \nconn = imaplib.IMAP4_SSL(host) \nconn.login(smtp_user,passwd) \nconn.select(mail_directory)\nstatus, data = conn.search(None,'unseen')\nemail_list = list(reversed(data[0].split()))\ndef decode_str(message,types):\n    try:\n        subject = email.header.decode_header(message)\n    except:\n        return None \n    if types == \"Subject\" or types == \"File\" :\n        sub_bytes = subject[0][0] \n        sub_charset = subject[0][1]\n        if None == sub_charset:\n            subject = sub_bytes\n        elif 'unknown-8bit' == sub_charset:\n            subject = sub_bytes.decode('utf-8')\n        else:\n            subject = sub_bytes.decode(sub_charset)\n        text = subject\n    elif types == \"From\":\n        format_list = []\n        for m in subject:\n            sub_bytes = m[0] \n            sub_charset = m[1]\n            if None == sub_charset:\n                if isinstance(sub_bytes, str):\n                    texts =sub_bytes\n                else:\n                    texts = sub_bytes.decode('utf-8').strip().strip('<>')\n            elif 'unknown-8bit' == sub_charset:\n                texts  = sub_bytes.decode('utf-8')\n            else:\n                texts = sub_bytes.decode(sub_charset)\n            format_list.append(texts)\n        text =\",\".join(format_list)\n    return text \n \ndef get_email(num, conn):\n    result = {}\n    typ, content = conn.fetch(num, '(RFC822)')\n    msg = BytesParser().parsebytes(content[0][1])\n    sub = msg.get('Subject')\n    from_ = msg.get(\"From\")\n    # Body details\n    result[\"From\"] = decode_str(from_,\"From\")\n    result[\"Subject\"] = decode_str(sub,\"Subject\")\n    result[\"File\"] = []\n    for part in msg.walk(): \n        if part.get_content_type() == \"text/plain\":\n            body = part.get_payload(decode=True)\n            charsets =  part.get_charsets()\n            result[\"Body\"] = body.decode(charsets[0])\n        fileName = part.get_filename()  \n        if None != fileName:\n            file_dict = {}\n            file_dict[\"name\"] =decode_str(fileName,\"File\")\n            file_dict[\"attachment\"] = part.get_payload(decode=True)\n            file_dict[\"content_type\"] = part.get_content_type()\n            new_file = ContentFile(file_dict[\"attachment\"])\n            file_obj = UploadedFile(new_file, file_dict[\"name\"],file_dict[\"content_type\"],new_file.size, None, None)\n            result[\"File\"].append(file_obj)\n#                 fileName_str = decode_str(fileName,\"File\")\n#                 att_path = os.path.join(settings.LOG_DIR,fileName_str)\n            #result[\"File\"] = part.get_payload(decode=True)\n#                 fp = open(att_path, 'wb') \n#                 fp.write(part.get_payload(decode=True)) \n#                 fp.close() \n    return result\nunseen_mails = []\nfor num in email_list:#email_list:\n    mail_info = get_email(num, conn)\n    mail_from = mail_info[\"From\"]\n    mail_subject = mail_info[\"Subject\"]\n    mail_content = mail_info[\"Body\"]\n    unseen_mails.append(mail_info)\n#         print(mail_from)\n#         print(mail_subject)\n#         print(mail_content)\nconn.close() \nconn.logout()\n\n\n#-----------------------------------------Submit Ticket--------------------------------------------#\nfrom omformflow.views import createOmData\nfrom omflow.global_obj import FlowActiveGlobalObject\ntry:\n    fa = FlowActiveGlobalObject.NameSearch(\"事故管理\", None, \"服務管理\")\n    event_uuid = fa.flow_uuid.hex\n    para_list = receive_keyword.split(',')\n    for mail_info in unseen_mails:\n        param = {}\n        mail_from = mail_info[\"From\"]\n        mail_subject = mail_info[\"Subject\"]\n        mail_content = mail_info[\"Body\"]\n        #如果type = ['h_group','h_title','h_status','h_level']\n        #{\"id\":\"title\",\"value\":mail_subject,\"type\":\"titile\"}\n        #{\"id\":\"status\",\"value\":<text>,\"type\":\"status\"}\n        #---------------------------------------------------\n        #{\"id\":\"FORMITM_4\",\"value\":0,\"type\":\"h_status\"},\\\n        #{\"id\":\"status\",\"value\":'new',\"type\":\"status\"},\\\n        if [item for item in para_list if item in mail_subject] and not (\"Re:\" in mail_subject  or \"RE:\" in mail_subject) :\n            formdata = [\n                {\"id\": \"status\",\"type\": \"header\", \"value\": 0},\\\n                {\"id\": \"FORMITM_3\",\"type\": \"h_status\",\"value\": 0},\\\n                {\"id\": \"group\",\"type\": \"header\",\"value\": {\"group\": 1,\"user\": \"\"}},\\\n                {\"id\": \"FORMITM_4\",\"type\": \"h_group\",\"value\": {\"group\": 1,\"user\": \"\"}},\\\n                {\"id\": \"FORMITM_25\",\"type\": \"inputbox\",\"value\": mail_from},\\\n                {\"id\": \"title\",\"type\": \"header\",\"value\": mail_subject},\\\n                {\"id\": \"FORMITM_28\",\"type\": \"h_title\",\"value\": mail_subject},\\\n                {\"id\": \"FORMITM_2\",\"type\": \"areabox\",\"value\":mail_content}]\n            formdata_str = json.dumps(formdata)\n            param['flow_uuid'] = event_uuid\n            param['formdata'] = formdata_str\n            files_list = mail_info[\"File\"]\n            a = createOmData(param,user='system',files=files_list)\n            result_status = a\nexcept Exception as e:\n    result_status = e","load_balance":false,"left":420},"top":0,"type":"python","left":0},{"id":"FLINE_MW4","config":{"linebox_top_width":32.5,"linebox_top":112.5,"source_item":"FITEM_1","source_side":"bottom","idcounter":4,"linebox_bottom_width":-32.5,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":135,"target_item":"FITEM_5","target_side":"top","linebox_left":480},"type":"line"},{"id":"FLINE_MW8","config":{"linebox_top_width":32.5,"linebox_top":237.5,"source_item":"FITEM_5","source_side":"bottom","idcounter":8,"linebox_bottom_width":-32.5,"linebox_arrow_left":476,"linebox_long":0,"linebox_arrow_top":260,"target_item":"FITEM_4","target_side":"top","linebox_left":480},"type":"line"}],"version":16777216,"subflow":[],"uid":1589520910421,"form_object":{"op1":[],"form_box_counter":0,"items":[],"status":[],"group":[],"title":false,"form_item_counter":0,"op2":[],"user":[],"level":[]}}}],"app_attr":"sys","app_name":"內建流程"}]